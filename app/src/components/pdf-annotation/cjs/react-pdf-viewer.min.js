"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),n=e(t),r=require("pdfjs-dist"),o=require("@umijs/hooks"),a=e(require("rangy/lib/rangy-core"));require("rangy/lib/rangy-textrange");var i=e(require("react-dom")),l=n.createContext({prefixClass:"viewer"}),c=function(e){var t=[];return Object.keys(e).forEach((function(n){n&&e[n]&&t.push(n)})),t.join(" ")},s=function(e){var t,r=e.children,o=e.isSelected,a=void 0!==o&&o,i=e.onClick,s=n.useContext(l);return n.createElement("button",{className:c((t={},t[s.prefixClass+"-button"]=!0,t[s.prefixClass+"-button-selected"]=a,t)),onClick:i},r)},u=function(){var e=n.useContext(l);return n.createElement("li",{className:e.prefixClass+"-menu-divider"})},p=function(e){var t=e.children,r=e.size,o=void 0===r?24:r,a=n.useContext(l),i=(o||24)+"px";return n.createElement("svg",{className:a.prefixClass+"-icon",height:i,viewBox:"0 0 24 24",width:i},t)},f=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},m=function(e){var t=e.checked,r=void 0!==t&&t,o=e.children,a=e.icon,i=void 0===a?null:a,c=e.onClick,s=n.useContext(l);return n.createElement("li",{className:s.prefixClass+"-menu-item",onClick:c},n.createElement("div",{className:s.prefixClass+"-menu-item-icon"},i),n.createElement("div",{className:s.prefixClass+"-menu-item-label"},o),n.createElement("div",{className:s.prefixClass+"-menu-item-check"},r&&n.createElement(f,null)))},d=function(e){var t=e.children,r=e.onClick,o=n.useContext(l);return n.createElement("button",{className:o.prefixClass+"-primary-button",onClick:r},t)},g=function(e){var t=e.progress,r=n.useContext(l);return n.createElement("div",{className:r.prefixClass+"-progress-bar"},n.createElement("div",{className:r.prefixClass+"-progress-bar-inner",style:{width:t+"%"}},t,"%"))},h=function(){var e=n.useContext(l);return n.createElement("div",{className:e.prefixClass+"-separator"})},v=function(){var e=n.useContext(l);return n.createElement("svg",{className:e.prefixClass+"-spinner",width:"64px",height:"64px",viewBox:"0 0 32 32"},n.createElement("circle",{className:e.prefixClass+"-spinner-circle",cx:"16",cy:"16",r:"12",strokeDasharray:2*Math.PI*9}))},E=function(e,t){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function C(e,t){function n(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var x,w=function(){return(w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},b=function(e,t,r,o,a){var i,s=n.useContext(l);return n.createElement("div",w({},t.attrs,{className:c((i={},i[s.prefixClass+"-layout-container"]=!0,i[s.prefixClass+"-layout-with-sidebar"]=e,i)),style:t.attrs.style}),t.children,n.createElement("div",{className:s.prefixClass+"-layout-toolbar"},o),n.createElement("div",{className:s.prefixClass+"-layout-sidebar"},a.children),n.createElement("div",w({},r.attrs,{className:s.prefixClass+"-layout-main",style:r.attrs.style}),r.children))},k=function(e){var t=n.useContext(l);return n.createElement("div",{className:t.prefixClass+"-toolbar"},n.createElement("div",{className:t.prefixClass+"-toolbar-left"},n.createElement("div",{className:t.prefixClass+"-toolbar-item"},e.toggleSidebarButton),n.createElement("div",{className:t.prefixClass+"-toolbar-item"},e.searchPopover),n.createElement("div",{className:t.prefixClass+"-toolbar-item"},e.previousPageButton),n.createElement("div",{className:t.prefixClass+"-toolbar-item"},e.currentPageInput," / ",e.numPages),n.createElement("div",{className:t.prefixClass+"-toolbar-item"},e.nextPageButton)),n.createElement("div",{className:t.prefixClass+"-toolbar-center"},n.createElement("div",{className:t.prefixClass+"-toolbar-item"},e.zoomOutButton),n.createElement("div",{className:t.prefixClass+"-toolbar-item"},e.zoomPopover),n.createElement("div",{className:t.prefixClass+"-toolbar-item"},e.zoomInButton)),n.createElement("div",{className:t.prefixClass+"-toolbar-right"},n.createElement("div",{className:t.prefixClass+"-toolbar-item"},e.fullScreenButton),n.createElement("div",{className:t.prefixClass+"-toolbar-item"},e.openFileButton),n.createElement("div",{className:t.prefixClass+"-toolbar-item"},e.downloadButton),n.createElement("div",{className:t.prefixClass+"-toolbar-item"},e.printButton),n.createElement("div",{className:t.prefixClass+"-toolbar-item"},e.moreActionsPopover)))},y=function(e,t,r){var o=function(e){var n=t.current;n&&!n.contains(e.target)&&r()};n.useEffect((function(){if(e)return document.addEventListener("click",o),function(){document.removeEventListener("click",o)}}),[])},S=function(e,t){var r=function(n){n.keyCode===e&&t()};n.useEffect((function(){return document.addEventListener("keyup",r),function(){document.removeEventListener("keyup",r)}}),[])},P=function(e){var t=e.children,r=e.closeOnClickOutside,o=e.closeOnEscape,a=e.onToggle,i=n.useContext(l),c=n.createRef();return n.useEffect((function(){var e=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=e}}),[]),S(27,(function(){return o&&a()})),y(r,c,a),n.createElement("div",{className:i.prefixClass+"-modal-body",ref:c},t)},M=function(e){var t=e.children,r=n.useContext(l);return n.createElement("div",{className:r.prefixClass+"-modal-overlay"},t)};!function(e){e.Close="Close",e.Open="Open",e.Toggle="Toggle"}(x||(x={}));var L,N=function(){var e=n.useState(!1),t=e[0],r=e[1];return{opened:t,toggle:function(e){switch(e){case x.Close:r(!1);break;case x.Open:r(!0);break;case x.Toggle:default:r((function(e){return!e}))}}}},T=function(e){var t=e.content,r=e.target,o=N(),a=o.opened,i=o.toggle;return n.createElement(n.Fragment,null,r(i,a),a&&t(i))},R=function(e){var t=e.closeOnClickOutside,r=e.closeOnEscape,o=e.content,a=e.target;return n.createElement(T,{target:a,content:function(e){return n.createElement(M,null,n.createElement(P,{closeOnClickOutside:t,closeOnEscape:r,onToggle:e},o(e)))}})};!function(e){e.TopLeft="TOP_LEFT",e.TopCenter="TOP_CENTER",e.TopRight="TOP_RIGHT",e.RightTop="RIGHT_TOP",e.RightCenter="RIGHT_CENTER",e.RightBottom="RIGHT_BOTTOM",e.BottomLeft="BOTTOM_LEFT",e.BottomCenter="BOTTOM_CENTER",e.BottomRight="BOTTOM_RIGHT",e.LeftTop="LEFT_TOP",e.LeftCenter="LEFT_CENTER",e.LeftBottom="LEFT_BOTTOM"}(L||(L={}));var O,F=L,B=function(e,t,r,o,a){n.useLayoutEffect((function(){var n=t.current,i=e.current,l=r.current;if(i&&n&&l){var c=l.getBoundingClientRect(),s=function(e,t,n,r){var o=t.getBoundingClientRect(),a=e.getBoundingClientRect(),i=a.height,l=a.width,c=0,s=0;switch(n){case F.TopLeft:c=o.top-i,s=o.left;break;case F.TopCenter:c=o.top-i,s=o.left+o.width/2-l/2;break;case F.TopRight:c=o.top-i,s=o.left+o.width-l;break;case F.RightTop:c=o.top,s=o.left+o.width;break;case F.RightCenter:c=o.top+o.height/2-i/2,s=o.left+o.width;break;case F.RightBottom:c=o.top+o.height-i,s=o.left+o.width;break;case F.BottomLeft:c=o.top+o.height,s=o.left;break;case F.BottomCenter:c=o.top+o.height,s=o.left+o.width/2-l/2;break;case F.BottomRight:c=o.top+o.height,s=o.left+o.width-l;break;case F.LeftTop:c=o.top,s=o.left-l;break;case F.LeftCenter:c=o.top+o.height/2-i/2,s=o.left-l;break;case F.LeftBottom:c=o.top+o.height-i,s=o.left-l}return{left:s+(r.left||0),top:c+(r.top||0)}}(i,n,o,a),u=s.top,p=s.left;i.style.top=u-c.top+"px",i.style.left=p-c.left+"px"}}),[])},z=function(e){var t,r=e.customClassName,o=e.position,a=n.useContext(l);return n.createElement("div",{className:c((t={},t[a.prefixClass+"-arrow"]=!0,t[a.prefixClass+"-arrow-tl"]=o===F.TopLeft,t[a.prefixClass+"-arrow-tc"]=o===F.TopCenter,t[a.prefixClass+"-arrow-tr"]=o===F.TopRight,t[a.prefixClass+"-arrow-rt"]=o===F.RightTop,t[a.prefixClass+"-arrow-rc"]=o===F.RightCenter,t[a.prefixClass+"-arrow-rb"]=o===F.RightBottom,t[a.prefixClass+"-arrow-bl"]=o===F.BottomLeft,t[a.prefixClass+"-arrow-bc"]=o===F.BottomCenter,t[a.prefixClass+"-arrow-br"]=o===F.BottomRight,t[a.prefixClass+"-arrow-lt"]=o===F.LeftTop,t[a.prefixClass+"-arrow-lc"]=o===F.LeftCenter,t[a.prefixClass+"-arrow-lb"]=o===F.LeftBottom,t[""+r]=""!==r,t))})},H=function(e){var t=e.children,r=e.closeOnClickOutside,o=e.offset,a=e.position,i=e.targetRef,c=e.onClose,s=n.useContext(l),u=n.createRef(),p=n.createRef();return y(r,u,c),B(u,i,p,a,o),n.createElement(n.Fragment,null,n.createElement("div",{ref:p,style:{left:0,position:"absolute",top:0}}),n.createElement("div",{className:s.prefixClass+"-popover-body",ref:u},n.createElement(z,{customClassName:s.prefixClass+"-popover-body-arrow",position:a}),t))},A=function(e){var t=e.closeOnEscape,r=e.onClose,o=n.useContext(l);return S(27,(function(){return t&&r()})),n.createElement("div",{className:o.prefixClass+"-popover-overlay"})},D=function(e){var t=e.closeOnClickOutside,r=e.closeOnEscape,o=e.content,a=e.offset,i=e.position,l=e.target,c=n.createRef();return n.createElement(T,{content:function(e){return n.createElement(n.Fragment,null,n.createElement(A,{closeOnEscape:r,onClose:e}),n.createElement(H,{closeOnClickOutside:t,offset:a,position:i,targetRef:c,onClose:e},o(e)))},target:function(e,t){return n.createElement("div",{ref:c},l(e,t))}})},I=function(e){var t=e.children,r=e.offset,o=e.position,a=e.targetRef,i=n.useContext(l),c=n.createRef(),s=n.createRef();return B(c,a,s,o,r),n.createElement(n.Fragment,null,n.createElement("div",{ref:s,style:{left:0,position:"absolute",top:0}}),n.createElement("div",{className:i.prefixClass+"-tooltip-body",ref:c},n.createElement(z,{customClassName:i.prefixClass+"-tooltip-body-arrow",position:o}),n.createElement("div",{className:i.prefixClass+"-tooltip-body-content"},t)))},V=function(e){var t=e.content,r=e.offset,o=e.position,a=e.target,i=n.createRef();return n.createElement(T,{target:function(e){return n.createElement("div",{ref:i,onMouseEnter:function(){e(x.Open)},onMouseLeave:function(){e(x.Close)}},a)},content:function(){return n.createElement(I,{offset:r,position:o,targetRef:i},t())}})};!function(e){e.Horizontal="Horizontal",e.Vertical="Vertical",e.Wrapped="Wrapped"}(O||(O={}));var W,q=O;!function(e){e[e.Hand=0]="Hand",e[e.Text=1]="Text"}(W||(W={}));var J,j=W;!function(e){e.ActualSize="ActualSize",e.PageFit="PageFit",e.PageWidth="PageWidth"}(J||(J={}));var _,U=J;!function(e){e[e.ExitFullScreen=0]="ExitFullScreen",e[e.FullScreenChange=1]="FullScreenChange",e[e.FullScreenElement=2]="FullScreenElement",e[e.FullScreenEnabled=3]="FullScreenEnabled",e[e.RequestFullScreen=4]="RequestFullScreen"}(_||(_={}));var Z,G={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},Y={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},X={ExitFullScreen:"msExitFullscreen",FullScreenChange:"MSFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},K="undefined"!=typeof window,Q=K&&(_.FullScreenEnabled in document&&G||Y.FullScreenEnabled in document&&Y||X.FullScreenEnabled in document&&X)||G,$=function(e){return K?e[Q.ExitFullScreen]():Promise.resolve({})},ee=function(){return K?document[Q.FullScreenElement]:null},te=function(e){var t=n.useState(!1),r=t[0],o=t[1],a=function(){var t=ee();o(t===e.current)};return n.useEffect((function(){var e;return e=a,K&&document.addEventListener(Q.FullScreenChange,e),function(){!function(e){K&&document.removeEventListener(Q.FullScreenChange,e)}(a)}}),[e.current]),{closeFullScreen:function(){var t=ee();r&&t&&t===e.current&&$(document)},isFullScreen:r,openFullScreen:function(){var t;(t=ee(),t&&t!==e.current?$(t):Promise.resolve()).then((function(){var t;e.current&&(t=e.current,K&&t[Q.RequestFullScreen]())}))}}},ne=function(e){return("0"+e).slice(-2)},re=function(e){var t="D:"+e.getFullYear()+ne(e.getMonth()+1)+ne(e.getDate());t=""+t+ne(e.getHours())+ne(e.getMinutes())+ne(e.getSeconds());var n=e.toString().match(/GMT(.\w+)/);if(!n)return t;var r=n[0].replace("GMT","");return t=""+t+(r=r.substr(0,3)+"'"+r.substr(3,5)+"'")},oe=function(e){var t=e.children;return n.createElement("div",{className:"Popover"},t)},ae=n.createContext([function(){throw new Error("Not implement AnnotationContext.onNewAnnotation")},{state:[],SelectionPopover:oe,AnnotationPopover:oe}]),ie=function(e){var r=e.children,o=e.onNewAnnotation,a=e.value,i=e.SelectionPopover,l=void 0===i?oe:i,c=e.AnnotationPopover,s=void 0===c?oe:c,u=t.useCallback((function(e,t,n,r){var i=function(e,t,n){return{annotationFlags:4,borderStyle:{width:1,style:1,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0},color:new Uint8ClampedArray([255,237,0]),contents:"",hasAppearance:!0,id:e,modificationDate:re(new Date),rect:t,subtype:"Highlight",title:"",creationDate:re(new Date),hasPopup:!0,annotationType:9,quadPoints:n}}(function(){var e,t=a?a.map((function(e){return e.id})):[];do{e=Math.random().toString().substr(2,3)+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,1).toUpperCase()}while(t.includes(e));return e}(),e,t);o&&o(i,n,r)}),[o]);return n.createElement(ae.Provider,{value:[u,{state:a||[],SelectionPopover:l,AnnotationPopover:s}]},r)},le=function(e){var r=e.page,o=e.renderAnnotations,a=n.useState(!0),i=a[0],l=a[1],c=n.useState([]),s=c[0],u=c[1],p=function(){var e=t.useContext(ae);e[0];return e[1].state}();return n.useEffect((function(){r.getAnnotations({intent:"display"}).then((function(e){l(!1),u(p)}))}),[p]),i?n.createElement(n.Fragment,null):o(s)};!function(e){e[e.Text=1]="Text",e[e.Link=2]="Link",e[e.FreeText=3]="FreeText",e[e.Line=4]="Line",e[e.Square=5]="Square",e[e.Circle=6]="Circle",e[e.Polygon=7]="Polygon",e[e.Polyline=8]="Polyline",e[e.Highlight=9]="Highlight",e[e.Underline=10]="Underline",e[e.Squiggly=11]="Squiggly",e[e.StrikeOut=12]="StrikeOut",e[e.Stamp=13]="Stamp",e[e.Caret=14]="Caret",e[e.Ink=15]="Ink",e[e.Popup=16]="Popup",e[e.FileAttachment=17]="FileAttachment"}(Z||(Z={}));var ce,se=Z;!function(e){e[e.Solid=1]="Solid",e[e.Dashed=2]="Dashed",e[e.Beveled=3]="Beveled",e[e.Inset=4]="Inset",e[e.Underline=5]="Underline"}(ce||(ce={}));var ue,pe=ce,fe=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),me=function(e,t,n,r){var o=parseInt(e,10);return o>=t&&o<=n?o:r},de=function(e){var t=fe.exec(e);if(!t)return null;var n=parseInt(t[1],10),r=me(t[2],1,12,1)-1,o=me(t[3],1,31,1),a=me(t[4],0,23,0),i=me(t[5],0,59,0),l=me(t[6],0,59,0),c=t[7]||"Z",s=me(t[8],0,23,0),u=me(t[9],0,59,0);switch(c){case"-":a+=s,i+=u;break;case"+":a-=s,i-=u}return new Date(Date.UTC(n,r,o,a,i,l))},ge=function(e){var r=e.annotation,o=t.useContext(l),a="";if(r.modificationDate){var i=de(r.modificationDate);a=i?i.toLocaleDateString()+", "+i.toLocaleTimeString():""}return n.createElement("div",{className:o.prefixClass+"-annotation-popup-wrapper",style:{top:r.annotationType===se.Popup?"":"100%"}},r.title&&n.createElement("div",{className:o.prefixClass+"-annotation-popup-wrapper-header"},n.createElement("div",{className:o.prefixClass+"-annotation-popup-wrapper-title"},r.title),n.createElement("span",{className:o.prefixClass+"-annotation-popup-wrapper-date"},a)),r.contents&&n.createElement("div",{className:o.prefixClass+"-annotation-popup-wrapper-content"},r.contents.split("\n").map((function(e,r){return n.createElement(t.Fragment,{key:r},e,n.createElement("br",null))}))))};!function(e){e.Click="Click",e.Hover="Hover"}(ue||(ue={}));var he=function(e){var t,r=e.annotation,o=e.children,a=e.ignoreBorder,i=e.hasPopup,l=e.isRenderable,c=e.page,s=e.viewport,u=r.rect,p=function(){var e=N(),t=e.opened,r=e.toggle,o=n.useState(ue.Hover),a=o[0],i=o[1];return{opened:t,closeOnHover:function(){a===ue.Hover&&r(x.Close)},openOnHover:function(){a===ue.Hover&&r(x.Open)},toggleOnClick:function(){switch(a){case ue.Click:t&&i(ue.Hover),r(x.Toggle);break;case ue.Hover:i(ue.Click),r(x.Open)}}}}(),f=p.closeOnHover,m=p.opened,d=p.openOnHover,g=p.toggleOnClick,h=(t=[u[0],c.view[3]+c.view[1]-u[1],u[2],c.view[3]+c.view[1]-u[3]],[Math.min(t[0],t[2]),Math.min(t[1],t[3]),Math.max(t[0],t[2]),Math.max(t[1],t[3])]),v=u[2]-u[0],E=u[3]-u[1],C={borderColor:"",borderBottomStyle:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!a&&r.borderStyle.width>0){switch(r.borderStyle.style){case pe.Dashed:C.borderStyle="dashed";break;case pe.Solid:C.borderStyle="solid";break;case pe.Underline:C.borderBottomStyle="solid";break;case pe.Beveled:case pe.Inset:}var w=r.borderStyle.width;C.borderWidth=w+"px",r.borderStyle.style!==pe.Underline&&(v-=2*w,E-=2*w);var b=r.borderStyle,k=b.horizontalCornerRadius,y=b.verticalCornerRadius;(k>0||y>0)&&(C.borderRadius=k+"px / "+y+"px"),r.color?C.borderColor="rgb("+(0|r.color[0])+", "+(0|r.color[1])+", "+(0|r.color[2])+")":C.borderWidth="0"}return n.createElement(n.Fragment,null,l&&o({popup:{opened:m,closeOnHover:f,openOnHover:d,toggleOnClick:g},slot:{attrs:{style:Object.assign({height:E+"px",left:h[0]+"px",top:h[1]+"px",transform:"matrix("+s.transform.join(",")+")",transformOrigin:"-"+h[0]+"px -"+h[1]+"px",width:v+"px"},C)},children:n.createElement(n.Fragment,null,i&&m&&n.createElement(ge,{annotation:r}))}}))},ve=function(e){var r=e.annotation,o=e.page,a=e.viewport,i=t.useContext(l),c=!1===r.hasPopup,s=!!(r.hasPopup||r.title||r.contents);return n.createElement(he,{annotation:r,hasPopup:c,ignoreBorder:!0,isRenderable:s,page:o,viewport:a},(function(e){return n.createElement("div",w({},e.slot.attrs,{className:i.prefixClass+"-annotation "+i.prefixClass+"-annotation-caret","data-annotation-id":r.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},Ee=function(e){var r=e.annotation,o=e.page,a=e.viewport,i=t.useContext(l),c=!1===r.hasPopup,s=!!(r.hasPopup||r.title||r.contents),u=r.rect,p=u[2]-u[0],f=u[3]-u[1],m=r.borderStyle.width;return n.createElement(he,{annotation:r,hasPopup:c,ignoreBorder:!0,isRenderable:s,page:o,viewport:a},(function(e){return n.createElement("div",w({},e.slot.attrs,{className:i.prefixClass+"-annotation "+i.prefixClass+"-annotation-circle","data-annotation-id":r.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),n.createElement("svg",{height:f+"px",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 "+p+" "+f,width:p+"px"},n.createElement("circle",{cy:f/2,fill:"none",rx:p/2-m/2,ry:f/2-m/2,stroke:"transparent",strokeWidth:m||1})),e.slot.children)}))},Ce=function(e){var t=e.split("/").pop();return t?t.split("#")[0].split("?")[0]:e},xe=function(e,t){var n="string"==typeof t?"":URL.createObjectURL(new Blob([t],{type:""})),r=document.createElement("a");r.style.display="none",r.href=n||e,r.setAttribute("download",Ce(e)),document.body.appendChild(r),r.click(),document.body.removeChild(r),n&&URL.revokeObjectURL(n)},we=function(e){var r=e.annotation,o=e.page,a=e.viewport,i=t.useContext(l),c=!(!1!==r.hasPopup||!r.title&&!r.contents),s=function(){var e=r.file;e&&xe(e.filename,e.content)};return n.createElement(he,{annotation:r,hasPopup:c,ignoreBorder:!0,isRenderable:!0,page:o,viewport:a},(function(e){return n.createElement("div",w({},e.slot.attrs,{className:i.prefixClass+"-annotation "+i.prefixClass+"-annotation-file-attachment","data-annotation-id":r.id,onClick:e.popup.toggleOnClick,onDoubleClick:s,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},be=function(e){var r=e.annotation,o=e.page,a=e.viewport,i=t.useContext(l),c=!1===r.hasPopup,s=!!(r.hasPopup||r.title||r.contents);return n.createElement(he,{annotation:r,hasPopup:c,ignoreBorder:!0,isRenderable:s,page:o,viewport:a},(function(e){return n.createElement("div",w({},e.slot.attrs,{className:i.prefixClass+"-annotation "+i.prefixClass+"-annotation-free-text","data-annotation-id":r.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},ke=function(e){var r=e.annotation,o=e.page,a=e.viewport,i=(t.useContext(l),!1===r.hasPopup),c=!!(r.hasPopup||r.title||r.contents),s=function(){var e=t.useContext(ae);e[0];return e[1].AnnotationPopover}(),u=(r.quadPoints?r.quadPoints:[]).map((function(e){return w(w({},r),{rect:[e[0].x,e[3].y,e[3].x,e[0].y]})}));return n.createElement(n.Fragment,null,u.map((function(e,t){return n.createElement(he,{key:t,annotation:e,hasPopup:i,ignoreBorder:!0,isRenderable:c,page:o,viewport:a},(function(t){var r,o,a=w(w({},t.slot.attrs),{style:w(w({},t.slot.attrs.style),{backgroundColor:"rgb("+e.color+", 0.4)",outline:"0.5px solid rgb("+e.color+", 0.8)"})}),i={height:null===(r=t.slot.attrs.style)||void 0===r?void 0:r.height,width:null===(o=t.slot.attrs.style)||void 0===o?void 0:o.width};return n.createElement(n.Fragment,null,n.createElement(s,{style:w(w({},a.style),{position:"absolute",cursor:"pointer",mixBlendMode:"multiply"}),data:e,onConfirm:function(){console.log("onConfirm")},content:n.createElement("div",{style:i,"data-annotation-id":e.id,onClick:t.popup.toggleOnClick,onMouseEnter:t.popup.openOnHover,onMouseLeave:t.popup.closeOnHover},t.slot.children)}))}))})))},ye=function(e){var r=e.annotation,o=e.page,a=e.viewport,i=t.useContext(l),c=!1===r.hasPopup,s=!!(r.hasPopup||r.title||r.contents),u=r.rect,p=u[2]-u[0],f=u[3]-u[1],m=r.borderStyle.width;return n.createElement(he,{annotation:r,hasPopup:c,ignoreBorder:!0,isRenderable:s,page:o,viewport:a},(function(e){return n.createElement("div",w({},e.slot.attrs,{className:i.prefixClass+"-annotation "+i.prefixClass+"-annotation-ink","data-annotation-id":r.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),r.inkLists&&r.inkLists.length&&n.createElement("svg",{height:f+"px",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 "+p+" "+f,width:p+"px"},r.inkLists.map((function(e,t){return n.createElement("polyline",{key:t,fill:"none",stroke:"transparent",strokeWidth:m||1,points:e.map((function(e){return e.x-u[0]+","+(u[3]-e.y)})).join(" ")})}))),e.slot.children)}))},Se=function(e){var r=e.annotation,o=e.page,a=e.viewport,i=t.useContext(l),c=!1===r.hasPopup,s=!!(r.hasPopup||r.title||r.contents),u=r.rect,p=u[2]-u[0],f=u[3]-u[1],m=r.borderStyle.width;return n.createElement(he,{annotation:r,hasPopup:c,ignoreBorder:!0,isRenderable:s,page:o,viewport:a},(function(e){return n.createElement("div",w({},e.slot.attrs,{className:i.prefixClass+"-annotation "+i.prefixClass+"-annotation-line","data-annotation-id":r.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),n.createElement("svg",{height:f+"px",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 "+p+" "+f,width:p+"px"},n.createElement("line",{stroke:"transparent",strokeWidth:m||1,x1:u[2]-r.lineCoordinates[0],x2:u[2]-r.lineCoordinates[2],y1:u[3]-r.lineCoordinates[1],y2:u[3]-r.lineCoordinates[3]})),e.slot.children)}))},Pe=function(e,t){return new Promise((function(n){new Promise((function(n){"string"==typeof t?e.getDestination(t).then((function(e){n(e)})):n(t)})).then((function(t){e.getPageIndex(t[0]).then((function(e){var r=function(e,t){switch(t[1].name){case"XYZ":return{bottomOffset:t[3],pageIndex:e-1,scaleTo:t[4]};case"Fit":return{bottomOffset:0,pageIndex:e-1,scaleTo:U.PageFit};default:return{bottomOffset:0,pageIndex:e-1,scaleTo:1}}}(e,t);n(r)}))}))}))},Me=function(e){var r=e.annotation,o=e.doc,a=e.page,i=e.viewport,c=e.onExecuteNamedAction,s=e.onJumpToDest,u=t.useContext(l),p=!!(r.url||r.dest||r.action),f=r.url?{href:r.url,rel:"noopener noreferrer nofollow",target:r.newWindow?"_blank":"",title:r.url}:{href:"",onClick:function(e){e.preventDefault(),r.action?c(r.action):Pe(o,r.dest).then((function(e){var t=e.pageIndex,n=e.bottomOffset,r=e.scaleTo;s(t+1,n,r)}))}};return n.createElement(he,{annotation:r,hasPopup:!1,ignoreBorder:!1,isRenderable:p,page:a,viewport:i},(function(e){return n.createElement("div",w({},e.slot.attrs,{className:u.prefixClass+"-annotation "+u.prefixClass+"-annotation-link","data-annotation-id":r.id}),n.createElement("a",w({},f)))}))},Le=function(e){var r=e.annotation,o=e.page,a=e.viewport,i=t.useContext(l),c=!1===r.hasPopup,s=!!(r.hasPopup||r.title||r.contents),u=r.rect,p=u[2]-u[0],f=u[3]-u[1],m=r.borderStyle.width;return n.createElement(he,{annotation:r,hasPopup:c,ignoreBorder:!0,isRenderable:s,page:o,viewport:a},(function(e){return n.createElement("div",w({},e.slot.attrs,{className:i.prefixClass+"-annotation "+i.prefixClass+"-annotation-polygon","data-annotation-id":r.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),r.vertices&&r.vertices.length&&n.createElement("svg",{height:f+"px",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 "+p+" "+f,width:p+"px"},n.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:m||1,points:r.vertices.map((function(e){return e.x-u[0]+","+(u[3]-e.y)})).join(" ")})),e.slot.children)}))},Ne=function(e){var r=e.annotation,o=e.page,a=e.viewport,i=t.useContext(l),c=!1===r.hasPopup,s=!!(r.hasPopup||r.title||r.contents),u=r.rect,p=u[2]-u[0],f=u[3]-u[1],m=r.borderStyle.width;return n.createElement(he,{annotation:r,hasPopup:c,ignoreBorder:!0,isRenderable:s,page:o,viewport:a},(function(e){return n.createElement("div",w({},e.slot.attrs,{className:i.prefixClass+"-annotation "+i.prefixClass+"-annotation-polyline","data-annotation-id":r.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),r.vertices&&r.vertices.length&&n.createElement("svg",{height:f+"px",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 "+p+" "+f,width:p+"px"},n.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:m||1,points:r.vertices.map((function(e){return e.x-u[0]+","+(u[3]-e.y)})).join(" ")})),e.slot.children)}))},Te=function(e){var r=e.annotation,o=e.page,a=e.viewport,i=t.useContext(l),c=!(!r.title&&!r.contents),s=!r.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].includes(r.parentType);return n.useLayoutEffect((function(){if(r.parentId){var e=document.querySelector('[data-annotation-id="'+r.parentId+'"]'),t=document.querySelector('[data-annotation-id="'+r.id+'"]');if(e&&t){var n=parseFloat(e.style.left),o=parseFloat(e.style.top)+parseFloat(e.style.height);t.style.left=n+"px",t.style.top=o+"px",t.style.transformOrigin="-"+n+"px -"+o+"px"}}}),[]),n.createElement(he,{annotation:r,hasPopup:s,ignoreBorder:!1,isRenderable:c,page:o,viewport:a},(function(e){return n.createElement("div",w({},e.slot.attrs,{className:i.prefixClass+"-annotation "+i.prefixClass+"-annotation-popup","data-annotation-id":r.id}),n.createElement(ge,{annotation:r}))}))},Re=function(e){var r=e.annotation,o=e.page,a=e.viewport,i=t.useContext(l),c=!1===r.hasPopup,s=!!(r.hasPopup||r.title||r.contents),u=r.rect,p=u[2]-u[0],f=u[3]-u[1],m=r.borderStyle.width;return n.createElement(he,{annotation:r,hasPopup:c,ignoreBorder:!0,isRenderable:s,page:o,viewport:a},(function(e){return n.createElement("div",w({},e.slot.attrs,{className:i.prefixClass+"-annotation "+i.prefixClass+"-annotation-square","data-annotation-id":r.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),n.createElement("svg",{height:f+"px",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 "+p+" "+f,width:p+"px"},n.createElement("rect",{height:f-m,fill:"none",stroke:"transparent",strokeWidth:m||1,x:m/2,y:m/2,width:p-m})),e.slot.children)}))},Oe=function(e){var r=e.annotation,o=e.page,a=e.viewport,i=t.useContext(l),c=!1===r.hasPopup,s=!!(r.hasPopup||r.title||r.contents);return n.createElement(he,{annotation:r,hasPopup:c,ignoreBorder:!0,isRenderable:s,page:o,viewport:a},(function(e){return n.createElement("div",w({},e.slot.attrs,{className:i.prefixClass+"-annotation "+i.prefixClass+"-annotation-squiggly","data-annotation-id":r.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},Fe=function(e){var r=e.annotation,o=e.page,a=e.viewport,i=t.useContext(l),c=!1===r.hasPopup,s=!!(r.hasPopup||r.title||r.contents);return n.createElement(he,{annotation:r,hasPopup:c,ignoreBorder:!0,isRenderable:s,page:o,viewport:a},(function(e){return n.createElement("div",w({},e.slot.attrs,{className:i.prefixClass+"-annotation "+i.prefixClass+"-annotation-stamp","data-annotation-id":r.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},Be=function(e){var r=e.annotation,o=e.page,a=e.viewport,i=t.useContext(l),c=!1===r.hasPopup,s=!!(r.hasPopup||r.title||r.contents);return n.createElement(he,{annotation:r,hasPopup:c,ignoreBorder:!0,isRenderable:s,page:o,viewport:a},(function(e){return n.createElement("div",w({},e.slot.attrs,{className:i.prefixClass+"-annotation "+i.prefixClass+"-annotation-strike-out","data-annotation-id":r.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},ze=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),n.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),n.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),n.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},He=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),n.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),n.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),n.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),n.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),n.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),n.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),n.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),n.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),n.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},Ae=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),n.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},De=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),n.createElement("path",{d:"M6 4.5L6 0.5"}),n.createElement("path",{d:"M18 4.5L18 0.5"}),n.createElement("path",{d:"M10 4.5L10 0.5"}),n.createElement("path",{d:"M14 4.5L14 0.5"}))},Ie=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),n.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),n.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},Ve=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},We=function(e){var r=e.annotation,o=e.childAnnotation,a=e.page,i=e.viewport,c=t.useContext(l),s=!1===r.hasPopup,u=!!(r.hasPopup||r.title||r.contents),p=r.name?r.name.toLowerCase():"";return n.createElement(he,{annotation:r,hasPopup:s,ignoreBorder:!1,isRenderable:u,page:a,viewport:i},(function(e){return n.createElement(n.Fragment,null,n.createElement("div",w({},e.slot.attrs,{className:c.prefixClass+"-annotation "+c.prefixClass+"-annotation-text","data-annotation-id":r.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),p&&n.createElement("div",{className:c.prefixClass+"-annotation-text-icon"},"check"===p&&n.createElement(f,null),"comment"===p&&n.createElement(ze,null),"help"===p&&n.createElement(He,null),"insert"===p&&n.createElement(Ve,null),"key"===p&&n.createElement(Ae,null),"note"===p&&n.createElement(De,null),("newparagraph"===p||"paragraph"===p)&&n.createElement(Ie,null)),e.slot.children),o&&o.annotationType===se.Popup&&e.popup.opened&&n.createElement(Te,{annotation:o,page:a,viewport:i}))}))},qe=function(e){var r=e.annotation,o=e.page,a=e.viewport,i=t.useContext(l),c=!1===r.hasPopup,s=!!(r.hasPopup||r.title||r.contents);return n.createElement(he,{annotation:r,hasPopup:c,ignoreBorder:!0,isRenderable:s,page:o,viewport:a},(function(e){return n.createElement("div",w({},e.slot.attrs,{className:i.prefixClass+"-annotation "+i.prefixClass+"-annotation-underline","data-annotation-id":r.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},Je=function(e){var r=e.doc,o=e.page,a=e.rotation,i=e.scale,c=e.onExecuteNamedAction,s=e.onJumpToDest,u=n.useContext(l);return n.createElement("div",{className:u.prefixClass+"-annotation-layer"},n.createElement(le,{page:o,renderAnnotations:function(e){var l=o.getViewport({rotation:a,scale:i}).clone({dontFlip:!0});return n.createElement(n.Fragment,null,e.filter((function(e){return!e.parentId})).map((function(a){var i=e.find((function(e){return e.parentId===a.id}));switch(a.annotationType){case se.Caret:return n.createElement(ve,{key:a.id,annotation:a,page:o,viewport:l});case se.Circle:return n.createElement(Ee,{key:a.id,annotation:a,page:o,viewport:l});case se.FileAttachment:return n.createElement(we,{key:a.id,annotation:a,page:o,viewport:l});case se.FreeText:return n.createElement(be,{key:a.id,annotation:a,page:o,viewport:l});case se.Highlight:return n.createElement(ke,{key:a.id,annotation:a,page:o,viewport:l});case se.Ink:return n.createElement(ye,{key:a.id,annotation:a,page:o,viewport:l});case se.Line:return n.createElement(Se,{key:a.id,annotation:a,page:o,viewport:l});case se.Link:return n.createElement(Me,{key:a.id,annotation:a,doc:r,page:o,viewport:l,onExecuteNamedAction:c,onJumpToDest:s});case se.Polygon:return n.createElement(Le,{key:a.id,annotation:a,page:o,viewport:l});case se.Polyline:return n.createElement(Ne,{key:a.id,annotation:a,page:o,viewport:l});case se.Popup:return n.createElement(Te,{key:a.id,annotation:a,page:o,viewport:l});case se.Square:return n.createElement(Re,{key:a.id,annotation:a,page:o,viewport:l});case se.Squiggly:return n.createElement(Oe,{key:a.id,annotation:a,page:o,viewport:l});case se.Stamp:return n.createElement(Fe,{key:a.id,annotation:a,page:o,viewport:l});case se.StrikeOut:return n.createElement(Be,{key:a.id,annotation:a,page:o,viewport:l});case se.Text:return n.createElement(We,{key:a.id,annotation:a,childAnnotation:i,page:o,viewport:l});case se.Underline:return n.createElement(qe,{key:a.id,annotation:a,page:o,viewport:l});default:return n.createElement(t.Fragment,{key:a.id})}})))}}))},je=function(e){var t=e.children,r=e.threshold,o=e.onVisibilityChanged,a=n.useRef(null);return n.useEffect((function(){var e=new IntersectionObserver((function(e){e.forEach((function(e){var t=e.isIntersecting,n=e.intersectionRatio;o({isVisible:t,ratio:n})}))}),{threshold:r||0}),t=a.current;if(t)return e.observe(t),function(){e.unobserve(t)}}),[]),n.createElement("div",{ref:a},t)},_e=function(e){var t=e.callback,r=e.children,o=e.rotation,a=e.scale;return n.useLayoutEffect((function(){t()}),[o,a]),n.createElement(n.Fragment,null,r)},Ue=function(e){var t=e.height,r=e.page,o=e.rotation,a=e.scale,i=e.width,c=n.useContext(l),s=n.createRef(),u=n.useRef(),p=window.devicePixelRatio||1;return n.createElement(_e,{callback:function(){var e=u.current;e&&e.cancel();var n=s.current;n.height=t*p,n.width=i*p;var l=n.getContext("2d",{alpha:!1}),c=r.getViewport({rotation:o,scale:a*p});u.current=r.render({canvasContext:l,viewport:c}),u.current.promise.then((function(){}),(function(){}))},rotation:o,scale:a},n.createElement("div",{className:c.prefixClass+"-canvas-layer",style:{height:t+"px",width:i+"px"}},n.createElement("canvas",{ref:s,style:{transform:"scale("+1/p+")",transformOrigin:"top left"}})))},Ze=function(e){var t=e.height,o=e.page,a=e.rotation,i=e.scale,c=e.width,s=n.useContext(l),u=n.createRef();return n.createElement(_e,{callback:function(){var e=u.current,n=o.getViewport({rotation:a,scale:i});o.getOperatorList().then((function(a){!function(){var e=u.current;e&&(e.innerHTML="")}(),new r.SVGGraphics(o.commonObjs,o.objs).getSVG(a,n).then((function(n){n.style.height=t+"px",n.style.width=c+"px",e.appendChild(n)}))}))},rotation:a,scale:i},n.createElement("div",{className:s.prefixClass+"-svg-layer",ref:u}))},Ge=function(e){var t=e.parentNode;t&&t.removeChild(e)},Ye=function(e){var t=e.parentNode;if(t){var n=document.createRange();n.selectNodeContents(e),function(e,t){Ge(e);var n=t.parentNode;n&&n.insertBefore(e,t),Ge(t)}(n.extractContents(),e),t.normalize()}},Xe=function(e,t){return{left:Math.min(t.x,e.x),top:Math.min(t.y,e.y),width:Math.abs(t.x-e.x),height:Math.abs(t.y-e.y)}},Ke=function(e){var r=e.onSelection,a=e.onDragStart,i=e.onDragEnd,c=e.shouldStart,s=e.textLayerRef,u=e.canvas,p=n.useContext(l),f=t.useState(null),m=f[0],d=f[1],g=t.useState(null),h=g[0],v=g[1],E=t.useState(!1),C=E[0],x=E[1],w=t.useRef(null),b=t.useCallback((function(){i(),d(null),v(null),x(!1)}),[i]),k=t.useCallback((function(e,t){var n=s.current;if(!n)return null;var r,o=n.parentElement;return o instanceof HTMLElement?(r||(r=o.getBoundingClientRect()),{x:e-r.left+o.scrollLeft,y:t-r.top+o.scrollTop}):null}),[s.current]),y=t.useCallback((function(e){if(c(e)){a();var t=k(e.pageX,e.pageY);d(t),v(null),x(!1)}else b()}),[k]),S=t.useCallback((function(e){if(m&&!C){var t=k(e.pageX,e.pageY);v(t)}}),[m,C]),P=t.useCallback((function(e){var t=s.current;if(t){var n=t.parentElement;if(n instanceof HTMLElement){e.currentTarget&&e.currentTarget.removeEventListener("mouseup",(function(){return P(e)}));var o=k(e.pageX,e.pageY);if(m&&o){var a=Xe(m,o);if(e.target instanceof HTMLElement&&n.contains(e.target)&&function(e){return e.width>=1&&e.height>=1}(a)){if(v(o),x(!0),m&&o){var i=function(e,t){var n=t.left,r=t.top,o=t.width,a=t.height,i=document.createElement("canvas");if(!(i instanceof HTMLCanvasElement))return"";i.width=o,i.height=a;var l=i.getContext("2d");if(!l||!e)return"";var c=window.devicePixelRatio;return l.drawImage(e,n*c,r*c,o*c,a*c,0,0,o,a),i.toDataURL("image/png")}(u,a);e.target instanceof HTMLElement&&r(i,a,b)}}else b()}}}}),[m,s.current,u]);return o.useEventListener("mousedown",y,{dom:s.current}),o.useEventListener("mousemove",S,{dom:s.current}),o.useEventListener("mouseup",P,{dom:s.current}),n.createElement("div",{className:p.prefixClass+"-mouse-selection",ref:w},m&&h?n.createElement("div",{className:p.prefixClass+"-mouse-selection-content",style:Xe(m,h)}):null)},Qe=n.memo((function(e){var r=e.position,o=e.containerBoundingRect,a=e.scrollTop,i=e.onConfirm,c=(e.viewport,e.boundingRect),s=(t.useContext(l),function(){var e=t.useContext(ae);e[0];return e[1].SelectionPopover}()),u=t.useRef(null),p=t.useState(0),f=p[0],m=p[1],d=t.useState(0),g=d[0],h=d[1];t.useEffect((function(){u&&u.current&&(m(u.current.offsetWidth),h(u.current.offsetHeight))}),[u.current]);r.top-g-5<a?r.bottom:r.top,function(e,t,n){Math.min(Math.max(e,t),n)}(r.left-f/2,0,o.width-f);return n.createElement(s,{onConfirm:i,style:w(w({},c),{position:"absolute"}),content:n.createElement("div",{style:w({},c)})})})),$e=function(e,t){return e.left<=t.left&&t.left<=e.left+e.width},et=function(e,t,n){return void 0===n&&(n=5),Math.abs(e.top-t.top)<n&&Math.abs(e.height-t.height)<n},tt=function(e,t,n){void 0===n&&(n=10);var r=e.left+e.width,o=t.left+t.width;return e.left<=t.left&&r<=o&&t.left-r<=n},nt=function(e,t){e.width=Math.max(t.width-e.left+t.left,e.width)};a.init();var rt,ot=function(){return a.getSelection()},at=function(e){var r=e.textLayerRef,a=e.onSelection,i=e.onCancel,c=t.useContext(l),s=t.useRef(null),u=t.useState([]),p=u[0],f=u[1],m=t.useCallback((function(){i(),f([])}),[i]),d=t.useCallback((function(){var e=ot();e&&(m(),e.removeAllRanges())}),[m]),g=t.useCallback((function(e){if("viewer-text"===e.target.className){var t=ot();if(t.expand("word",{trim:!0}),t){f([]);var n=t?t.toString():"";if(n&&t&&t.rangeCount>=1){var o=t.getRangeAt(0).nativeRange,i=r.current;if(o&&o.startContainer.parentElement&&i){var l=function(e){for(var t=function(e){return e.sort((function(e,t){var n=e.top-t.top;return 0===n?e.left-t.left:n}))}(e),n=new Set,r=t.filter((function(e){return t.every((function(t){return r=t,!((n=e).top>r.top&&n.left>r.left&&n.top+n.height<r.top+r.height&&n.left+n.width<r.left+r.width);var n,r}))})),o=0;o<=2;)r.forEach((function(e){r.forEach((function(t){e===t||n.has(e)||n.has(t)||et(e,t)&&($e(e,t)&&(nt(e,t),e.height=Math.max(e.height,t.height),n.add(t)),tt(e,t)&&(nt(e,t),n.add(t)))}))})),o+=1;return r.filter((function(e){return!n.has(e)}))}(function(e,t){return Array.from(e.getClientRects()).map((function(e){return{left:e.left-t.getBoundingClientRect().left,top:e.top-t.getBoundingClientRect().top,width:e.width,height:e.height}}))}(o,i)),c=function(e,t){var n=e.getBoundingClientRect();return{left:n.left-t.getBoundingClientRect().left,top:n.top-t.getBoundingClientRect().top,width:n.width,height:n.height}}(o,i);f(l),a(n,c,l,m),t.removeAllRanges()}}}}}),[r.current,m]);return o.useEventListener("mousedown",d,{dom:r.current}),o.useEventListener("mouseup",g,{dom:r.current}),n.createElement(t.Fragment,null,p.map((function(e,t){return n.createElement("div",{key:t,className:c.prefixClass+"-text-selection",ref:s,style:e})})))},it=function(e){var o=e.keywordRegexp,a=e.match,i=e.page,c=e.pageIndex,s=e.rotation,u=e.scale,p=e.onJumpToMatch,f=n.useContext(l),m=n.useRef(null),d=n.useRef(),g=n.useRef(!1),h=t.useContext(ae)[0],v=n.useCallback((function(e){var t=e.left,n=function(e,t){var n=e.top,r=e.left,o=e.width,a=e.height;if(6==t.length){var i=t,l=i[0]*i[3]-i[1]*i[2];return{width:o/i[0],height:a/i[3],left:(r*i[3]-n*i[2]+i[2]*i[5]-i[4]*i[3])/l,top:(-r*i[1]+n*i[0]+i[4]*i[1]-i[0]*i[5])/l}}return{top:n,left:r,width:o,height:a}}({top:e.top,left:t,width:e.width,height:e.height},i.getViewport({rotation:s,scale:u}).clone({dontFlip:!0}).transform),r=n.top,o=n.left,a=n.width,l=n.height,c=o,p=i.view[1]+i.view[3]-r;return[c,p-l,c+a,p]}),[i,s,u]),E=n.useCallback((function(e){return e.map((function(e){var t=v(e),n=t[0],r=t[1],o=t[2],a=t[3];return[{x:n,y:a},{x:o,y:a},{x:n,y:r},{x:o,y:r}]}))}),[v]),C=function(e){var t=e.textContent;if(o.source.trim()&&t){var n=t.search(o),r=e.firstChild;if(-1!==n&&r)(function(e,t,n){var r=new Range;r.setStart(e,t),r.setEnd(e,n);var o=document.createElement("span");return r.surroundContents(o),o})(r,n,n+o.source.length).classList.add(f.prefixClass+"-text-highlight")}},x=function(){var e=m.current;if(e)for(var t=e.querySelectorAll("span."+f.prefixClass+"-text-highlight"),n=t.length,r=0;r<n;r++)Ye(t[r])},w=function(){var e=m.current;if(a.pageIndex===c&&e){var t=e.querySelectorAll("span."+f.prefixClass+"-text-highlight");if(a.matchIndex<t.length){var n=function(e,t){for(var n=e.offsetTop,r=e.offsetLeft,o=e.parentElement;o&&o!==t;)n+=o.offsetTop,r+=o.offsetLeft,o=o.parentElement;return{left:r,top:n}}(t[a.matchIndex],e),r=n.top,o=n.left;p(c,r/u,o/u)}}};n.useEffect((function(){var e=m.current;if(o&&g.current&&e&&(x(),o.source.trim()))for(var t=e.querySelectorAll("span."+f.prefixClass+"-text"),n=t.length,r=0;r<n;r++)C(t[r])}),[o,g.current]),n.useEffect((function(){g.current&&w()}),[a]);var b=n.useState(!1),k=(b[0],b[1]),y=n.useState(null),S=y[0],P=y[1],M=n.useRef(null),L=n.useCallback((function(){return i.getViewport({rotation:s,scale:u}).clone({dontFlip:!0})}),[i,s,u]),N=n.useCallback((function(){var e,t;return null===(t=null===(e=m.current)||void 0===e?void 0:e.parentElement)||void 0===t?void 0:t.querySelector("div ."+f.prefixClass+"-canvas-layer canvas")}),[m.current]);return n.createElement(_e,{callback:function(){var e=d.current;e&&e.cancel();var t=m.current;if(t){var n=i.getViewport({rotation:s,scale:u});g.current=!1,i.getTextContent().then((function(e){!function(){var e=m.current;if(e)for(var t=e.querySelectorAll("span."+f.prefixClass+"-text"),n=t.length,r=0;r<n;r++){var o=t[r];e.removeChild(o)}}(),d.current=r.renderTextLayer({container:t,textContent:e,viewport:n}),d.current.promise.then((function(){g.current=!0;var e=t.childNodes,n=e.length;o&&x();for(var r=0;r<n;r++){var a=e[r];a.classList.add(f.prefixClass+"-text"),o&&C(a)}w()}),(function(){}))}))}},rotation:s,scale:u},n.createElement("div",{className:f.prefixClass+"-text-layer",ref:m},n.createElement(Ke,{canvas:N(),onDragStart:function(){k(!0)},onDragEnd:function(){k(!1),P(null)},textLayerRef:m,onChange:function(e){},shouldStart:function(e){var t=e.altKey,n=e.target instanceof HTMLElement&&e.target.className===f.prefixClass+"-text-layer";return t&&n},onSelection:function(e,t,n){var r=v(t),o=E([t]);P({boundingRect:t,rect:r,quadPoints:o,contents:{image:e}}),M.current=n}})),n.createElement(at,{textLayerRef:m,onCancel:function(){P(null)},onSelection:function(e,t,n,r){var o=v(t),a=E(n);P({boundingRect:t,rect:o,quadPoints:a,contents:{text:e}}),M.current=r}}),m&&m.current&&S&&n.createElement(Qe,{viewport:L(),onConfirm:function(){M.current&&(h(S.rect,S.quadPoints,S.contents,M.current),P(null))},scrollTop:m.current.scrollTop,containerBoundingRect:m.current.getBoundingClientRect(),boundingRect:S.boundingRect,position:{left:m.current.offsetLeft+S.boundingRect.left+S.boundingRect.width/2,top:S.boundingRect.top+m.current.offsetTop,bottom:S.boundingRect.top+m.current.offsetLeft+S.boundingRect.height}}))},lt=function(e){var t=e.doc,r=e.height,o=e.keywordRegexp,a=e.match,i=e.pageIndex,c=e.renderPage,s=e.rotation,u=e.scale,p=e.width,f=e.onExecuteNamedAction,m=e.onJumpToDest,d=e.onPageVisibilityChanged,g=n.useContext(l),h=n.useState({isCalculated:!1,page:null,pageHeight:r,pageWidth:p,viewportRotation:0}),E=h[0],C=h[1],x=E.isCalculated,w=E.page,b=E.pageHeight,k=E.pageWidth,y=Array(10).fill(null).map((function(e,t){return t/10})),S=k*u,P=b*u,M=Math.abs(s)%180==0,L=M?S:P,N=M?P:S,T=c||function(e){return n.createElement(n.Fragment,null,e.canvasLayer.children,e.textLayer.children,e.annotationLayer.children)},R=(s+E.viewportRotation)%360;return n.createElement(je,{onVisibilityChanged:function(e){var n=e.isVisible?e.ratio:0;d(i,n),e.isVisible&&!x&&t.getPage(i+1).then((function(e){var t=e.getViewport({scale:1});C({isCalculated:!0,page:e,pageHeight:t.height,pageWidth:t.width,viewportRotation:t.rotation})}))},threshold:y},n.createElement("div",{className:g.prefixClass+"-page-layer",style:{height:N+"px",width:L+"px"}},w?T({annotationLayer:{attrs:{},children:n.createElement(Je,{doc:t,page:w,rotation:R,scale:u,onExecuteNamedAction:f,onJumpToDest:m})},canvasLayer:{attrs:{},children:n.createElement(Ue,{height:N,page:w,rotation:R,scale:u,width:L})},doc:t,height:N,pageIndex:i,rotation:s,scale:u,svgLayer:{attrs:{},children:n.createElement(Ze,{height:N,page:w,rotation:R,scale:u,width:L})},textLayer:{attrs:{},children:n.createElement(it,{keywordRegexp:o,match:a,page:w,pageIndex:i,rotation:R,scale:u,onJumpToMatch:function(e,t,n){m(e,b-t,u)}})},width:L}):n.createElement(v,null)))},ct=n.createContext({}),st=function(){var e=n.useContext(ct),t=n.useContext(l);return n.createElement("div",{className:t.prefixClass+"-drop-area"},e.main.dragDropFile)},ut=function(e){var t=e.numLoadedPages,r=e.numPages,o=e.onCancel,a=e.onStartPrinting,i=n.useContext(ct),c=n.useContext(l),s=Math.floor(100*t/r);return n.useEffect((function(){t===r&&a()}),[t]),n.createElement("div",{className:c.prefixClass+"-print-progress"},n.createElement("div",{className:c.prefixClass+"-print-progress-inner"},n.createElement("div",{className:c.prefixClass+"-print-progress-message"},i.printProgress.preparingDocument),n.createElement("div",{className:c.prefixClass+"-print-progress-bar"},n.createElement(g,{progress:s})),n.createElement(d,{onClick:o},i.printProgress.cancel)))};!function(e){e.Inactive="Inactive",e.Preparing="Preparing",e.Cancelled="Cancelled",e.Ready="Ready"}(rt||(rt={}));var pt,ft=rt,mt=function(e){var t=e.page,r=e.pageHeight,o=e.pageWidth,a=e.rotation,i=e.onLoad,c=n.useContext(l),s=n.useRef(),u=n.useState(""),p=u[0],f=u[1];return n.useEffect((function(){var e=s.current;e&&e.cancel();var n=document.createElement("canvas");n.height=Math.floor(r*(150/72)),n.width=Math.floor(o*(150/72));var i=n.getContext("2d");i.save(),i.fillStyle="rgb(255, 255, 255)",i.fillRect(0,0,n.width,n.height),i.restore();var l=t.getViewport({rotation:a,scale:1});s.current=t.render({canvasContext:i,intent:"print",transform:[150/72,0,0,150/72,0,0],viewport:l}),s.current.promise.then((function(){"toBlob"in n?n.toBlob((function(e){f(URL.createObjectURL(e))})):f(n.toDataURL())}),(function(){}))}),[]),p?n.createElement("div",{className:c.prefixClass+"-print-page-thumbnail",style:{height:Math.floor(96*r/72)+"px",width:Math.floor(96*o/72)+"px"}},n.createElement("img",{src:p,style:{height:Math.floor(96*r/72)+"px",width:Math.floor(96*o/72)+"px"},onLoad:i})):n.createElement(v,null)},dt=function(e){var t=e.doc,r=e.pageHeight,o=e.pageIndex,a=e.pageWidth,i=e.rotation,l=e.onLoad,c=n.useState({height:r,page:null,viewportRotation:0,width:a}),s=c[0],u=c[1],p=s.page,f=s.height,m=s.width,d=Math.abs(i)%180==0;n.useEffect((function(){t.getPage(o+1).then((function(e){var t=e.getViewport({scale:1});u({height:t.height,page:e,viewportRotation:t.rotation,width:t.width})}))}),[]);var g=(i+s.viewportRotation)%360;return p?n.createElement(mt,{page:p,pageHeight:d?f:m,pageWidth:d?m:f,rotation:g,onLoad:l}):n.createElement(v,null)},gt=function(e){var t=e.doc,r=e.pageHeight,o=e.pageWidth,a=e.printStatus,c=e.rotation,s=e.onCancel,u=e.onLoad,p=n.useContext(l),f=n.useState(0),m=f[0],d=f[1];n.useEffect((function(){a===ft.Ready&&(document.body.classList.add(p.prefixClass+"-body-printing"),window.print());var e=function(){a===ft.Ready&&(document.body.classList.remove(p.prefixClass+"-body-printing"),s())};return document.addEventListener("mousemove",e),function(){return document.removeEventListener("mousemove",e)}}),[a]);var g=t.numPages,h=function(){var e=m+1;d(e),u(e)};return i.createPortal(n.createElement(n.Fragment,null,n.createElement("div",{className:p.prefixClass+"-print-zone"},Array(g).fill(0).map((function(e,a){return n.createElement(dt,{key:a,doc:t,pageHeight:r,pageIndex:a,pageWidth:o,rotation:c,onLoad:h})}))),n.createElement("style",{dangerouslySetInnerHTML:{__html:"\n                            @supports ((size:A4) and (size:1pt 1pt)) {\n                                @page { size: "+o+"pt "+r+"pt }\n                            }\n                        "}})),document.body)},ht=function(e){var t=e.doc,r=e.pageHeight,o=e.pageWidth,a=e.printStatus,i=e.rotation,l=e.onCancel,c=e.onStartPrinting,s=n.useState(0),u=s[0],p=s[1],f=function(){p(0),l()};return n.createElement(n.Fragment,null,a===ft.Preparing&&n.createElement(ut,{numLoadedPages:u,numPages:t.numPages,onCancel:f,onStartPrinting:function(){p(0),c()}}),(a===ft.Preparing||a===ft.Ready)&&n.createElement(gt,{doc:t,pageHeight:r,pageWidth:o,printStatus:a,rotation:i,onCancel:f,onLoad:p}))},vt=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M10.515,9.514h3c0.552,0,1,0.448,1,1v3c0,0.552-0.448,1-1,1h-3c-0.552,0-1-0.448-1-1v-3\n                C9.515,9.962,9.963,9.514,10.515,9.514z\n                M0.531,23.499l6.984-6.985\n                M16.515,7.514L23.5,0.529\n                M21.515,7.514h-5v-5\n                M7.515,21.514v-5 h-5\n                M0.523,0.521l6.992,6.993\n                M16.515,16.514l6.985,6.985\n                M16.515,21.514v-5h5\n                M2.515,7.514h5v-5"}))},Et=function(e){var t=e.onClick,r=n.useContext(l);return n.createElement("div",{className:r.prefixClass+"-exit-fullscreen"},n.createElement("div",{className:r.prefixClass+"-exit-fullscreen-inner"},n.createElement(s,{onClick:t},n.createElement(vt,null))))},Ct=function(e){var t=e.files,r=n.useContext(ct),o=n.useContext(l);return 0===t.length?n.createElement("div",{className:o.prefixClass+"-attachment-list-empty"},r.attachment.noAttachment):n.createElement("ul",{className:o.prefixClass+"-attachment-list"},t.map((function(e){return n.createElement("li",{className:o.prefixClass+"-attachment-item",key:"attachment-"+e.fileName,title:""+r.attachment.clickToDownload,onClick:function(){return xe(e.fileName,e.data)}},e.fileName)})))},xt=function(e){var t=e.doc,r=n.useState({files:[],isLoaded:!1}),o=r[0],a=r[1];return n.useEffect((function(){t.getAttachments().then((function(e){var t=e?Object.keys(e).map((function(t){return{data:e[t].content,fileName:e[t].filename}})):[];a({files:t,isLoaded:!0})}))}),[]),o.isLoaded?n.createElement(Ct,{files:o.files}):n.createElement(v,null)},wt=function(e){var t=e.bookmark,r=e.depth,o=e.doc,a=e.onClick,i=e.onJumpToDest,c=n.useContext(l),s=n.createRef(),u=n.createRef(),p=n.useRef(!0),f=t.items&&t.items.length>0;return n.createElement(n.Fragment,null,n.createElement("div",{className:c.prefixClass+"-bookmark-item",style:{paddingLeft:20*r+4+"px"},onClick:function(){!f&&t.dest&&a(t.dest)}},f&&n.createElement("span",{ref:s,className:c.prefixClass+"-bookmark-toggle",onClick:function(){p.current=!p.current;var e=u.current,t=s.current;e&&t&&(e.style.display=p.current?"block":"none",t.classList.toggle(c.prefixClass+"-bookmark-toggle-expanded"))}},"►"),t.url?n.createElement("a",{className:c.prefixClass+"-bookmark-title",href:t.url,rel:"noopener noreferrer nofollow",target:t.newWindow?"_blank":""},t.title):n.createElement("div",{className:c.prefixClass+"-bookmark-title",onClick:function(){f&&t.dest&&a(t.dest)}},t.title)),f&&n.createElement("div",{ref:u},n.createElement(bt,{bookmarks:t.items,depth:r+1,doc:o,onJumpToDest:i})))},bt=function(e){var t=e.bookmarks,r=e.depth,o=void 0===r?0:r,a=e.doc,i=e.onJumpToDest,c=n.useContext(l),s=function(e){Pe(a,e).then((function(e){var t=e.pageIndex,n=e.bottomOffset,r=e.scaleTo;i(t+1,n,r)}))};return n.createElement("ul",{className:c.prefixClass+"-bookmark-list"},t.map((function(e,t){return n.createElement("li",{key:t},n.createElement(wt,{bookmark:e,depth:o,doc:a,onClick:s,onJumpToDest:i}))})))},kt=function(e){var t=e.doc,r=e.onJumpToDest,o=n.useContext(ct),a=n.useContext(l),i=n.useState({isLoaded:!1,items:[]}),c=i[0],s=i[1];return n.useEffect((function(){t.getOutline().then((function(e){s({isLoaded:!0,items:e||[]})}))}),[]),c.isLoaded?0===c.items.length?n.createElement("div",{className:a.prefixClass+"-bookmark-empty"},o.bookmark.noBookmark):n.createElement(bt,{bookmarks:c.items,depth:0,doc:t,onJumpToDest:r}):n.createElement(v,null)},yt=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M11.5,1.5h11c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h3\n                M11.5,10.5c0,0.55-0.3,0.661-0.659,0.248L8,7.5l-2.844,3.246c-0.363,0.414-0.659,0.3-0.659-0.247v-9c0-0.552,0.448-1,1-1h5\n                c0.552,0,1,0.448,1,1L11.5,10.5z\n                M14.5,6.499h6\n                M14.5,10.499h6\n                M3.5,14.499h17\n                M3.5,18.499h16.497"}))},St=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M7.618,15.345l8.666-8.666c0.78-0.812,2.071-0.838,2.883-0.058s0.838,2.071,0.058,2.883\n                c-0.019,0.02-0.038,0.039-0.058,0.058L7.461,21.305c-1.593,1.593-4.175,1.592-5.767,0s-1.592-4.175,0-5.767c0,0,0,0,0,0\n                L13.928,3.305c2.189-2.19,5.739-2.19,7.929-0.001s2.19,5.739,0,7.929l0,0L13.192,19.9"}))},Pt=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\n                M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\n                M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z\n                M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z"}))},Mt=function(e){var t=e.page,r=e.pageHeight,o=e.pageWidth,a=e.rotation,i=e.thumbnailHeight,l=e.thumbnailWidth,c=n.useRef(),s=n.useState(""),u=s[0],p=s[1];return n.useEffect((function(){var e=c.current;e&&e.cancel();var n=document.createElement("canvas"),i=n.getContext("2d",{alpha:!1}),s=l,u=s/(o/r),f=s/o;n.height=u,n.width=s,n.style.height=u+"px",n.style.width=s+"px";var m=t.getViewport({rotation:a,scale:f});c.current=t.render({canvasContext:i,viewport:m}),c.current.promise.then((function(){return p(n.toDataURL())}),(function(){}))}),[a]),u?n.createElement("img",{src:u,height:i+"px",width:l+"px"}):n.createElement(v,null)},Lt=function(e){var t=e.doc,r=e.pageHeight,o=e.pageIndex,a=e.pageWidth,i=e.rotation,c=n.useContext(l),s=n.useState({height:r,isCalculated:!1,page:null,viewportRotation:0,width:a}),u=s[0],p=s[1],f=u.isCalculated,m=u.page,d=u.height,g=u.width,h=g/d,E=Math.abs(i)%180==0,C=E?100:100/h,x=E?100/h:100,w=(i+u.viewportRotation)%360;return n.createElement(je,{onVisibilityChanged:function(e){e.isVisible&&!f&&t.getPage(o+1).then((function(e){var t=e.getViewport({scale:1});p({height:t.height,isCalculated:!0,page:e,viewportRotation:t.rotation,width:t.width})}))}},n.createElement("div",{className:c.prefixClass+"-thumbnail-container",style:{height:x+"px",width:C+"px"}},m?n.createElement(Mt,{page:m,pageHeight:E?d:g,pageWidth:E?g:d,rotation:w,thumbnailHeight:x,thumbnailWidth:C}):n.createElement(v,null)))},Nt=function(e){var t=e.currentPage,r=e.doc,o=e.pageHeight,a=e.pageWidth,i=e.rotation,s=e.onJumpToPage,u=n.useContext(l),p=r.numPages;return n.createElement(n.Fragment,null,Array(p).fill(0).map((function(e,l){var p;return n.createElement("div",{key:"thumbnail-"+l},n.createElement("div",{className:c((p={},p[u.prefixClass+"-thumbnail"]=!0,p[u.prefixClass+"-thumbnail-selected"]=t===l,p)),onClick:function(){return s(l)}},n.createElement(Lt,{doc:r,pageHeight:o,pageIndex:l,pageWidth:a,rotation:i})))})))};!function(e){e.Attachment="Attachment",e.Bookmark="Bookmark",e.Thumbnail="Thumbnail"}(pt||(pt={}));var Tt={left:0,top:8},Rt=function(e){var t,r=e.currentPage,o=e.doc,a=e.height,i=e.rotation,u=e.width,p=e.onJumpToDest,f=e.onJumpToPage,m=n.useContext(ct),d=n.useContext(l),g=n.useState(pt.Thumbnail),h=g[0],v=g[1];return n.createElement("div",{className:d.prefixClass+"-sidebar"},n.createElement("div",{className:d.prefixClass+"-sidebar-tabs"},n.createElement("div",{className:d.prefixClass+"-sidebar-tab"},n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:function(){return v(pt.Thumbnail)},isSelected:h===pt.Thumbnail},n.createElement(Pt,null)),content:function(){return m.sidebar.thumbnail},offset:Tt})),n.createElement("div",{className:d.prefixClass+"-sidebar-tab"},n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:function(){return v(pt.Bookmark)},isSelected:h===pt.Bookmark},n.createElement(yt,null)),content:function(){return m.sidebar.bookmark},offset:Tt})),n.createElement("div",{className:d.prefixClass+"-sidebar-tab"},n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:function(){return v(pt.Attachment)},isSelected:h===pt.Attachment},n.createElement(St,null)),content:function(){return m.sidebar.attachment},offset:Tt}))),n.createElement("div",{className:c((t={},t[d.prefixClass+"-sidebar-content"]=!0,t[d.prefixClass+"-sidebar-thumbnails"]=h===pt.Thumbnail,t))},h===pt.Thumbnail&&n.createElement(Nt,{currentPage:r,doc:o,pageHeight:a,pageWidth:u,rotation:i,onJumpToPage:f}),h===pt.Bookmark&&n.createElement(kt,{doc:o,onJumpToDest:p}),h===pt.Attachment&&n.createElement(xt,{doc:o})))},Ot=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M2.32,2.966h19.452c0.552,0.001,1,0.449,0.999,1.001c0,0.182-0.05,0.36-0.144,0.516L12.9,20.552\n                c-0.286,0.472-0.901,0.624-1.373,0.338c-0.138-0.084-0.254-0.2-0.338-0.338L1.465,4.483C1.179,4.01,1.331,3.396,1.804,3.11\n                C1.96,3.016,2.138,2.966,2.32,2.966z"}))},Ft=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M17.5,11.5c3.314,0,6,2.686,6,6s-2.686,6-6,6s-6-2.686-6-6S14.186,11.5,17.5,11.5z\n                M17.5,14.5v6\n                M17.5,20.5\n                l-2.25-2.25\n                M17.5,20.5l2.25-2.25\n                M10.5,23.5h-9c-0.552,0-1-0.448-1-1v-21c0-0.552,0.448-1,1-1h13.293\n                c0.265,0,0.52,0.105,0.707,0.293L19.207,4.5C19.395,4.687,19.5,4.942,19.5,5.207V8.5"}))},Bt=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M15.5,8.499l8-8\n                M0.5,23.499l8-8\n                M5.5,23.499h-5v-5\n                M23.5,5.499v-5h-5\n                M15.5,15.499l8,8\n                M0.5,0.499l8,8\n                M0.5,5.499v-5h5\n                M18.5,23.499h5v-5"}))},zt=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M11.5,5.5v-2C11.5,2.672,12.172,2,13,2s1.5,0.672,1.5,1.5v2 M14.5,11.5v-6C14.5,4.672,15.172,4,16,4\n                c0.828,0,1.5,0.672,1.5,1.5v3 M17.5,13V8.5C17.5,7.672,18.172,7,19,7s1.5,0.672,1.5,1.5v10c0,2.761-2.239,5-5,5h-3.335\n                c-1.712-0.001-3.305-0.876-4.223-2.321C6.22,18.467,4.083,14,4.083,14c-0.378-0.545-0.242-1.292,0.303-1.67\n                c0.446-0.309,1.044-0.281,1.458,0.07L8.5,15.5v-10C8.5,4.672,9.172,4,10,4s1.5,0.672,1.5,1.5v6"}))},Ht=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M6.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z\n                M14.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z\n                M22.5,21.5 c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z"}))},At=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M12,1.001c6.075,0,11,4.925,11,11s-4.925,11-11,11s-11-4.925-11-11S5.925,1.001,12,1.001z\n                M14.5,17.005H13\n                c-0.552,0-1-0.448-1-1v-6.5c0-0.276-0.224-0.5-0.5-0.5H10\n                M11.745,6.504L11.745,6.504\n                M11.745,6.5c-0.138,0-0.25,0.112-0.25,0.25\n                S11.607,7,11.745,7s0.25-0.112,0.25-0.25S11.883,6.5,11.745,6.5"}))},Dt=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M1.5,0.497h20c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-20c-0.552,0-1-0.448-1-1v-20\n                C0.5,0.945,0.948,0.497,1.5,0.497z\n                M7.5,0.497v22"}))},It=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043\n                L23.541,5.627"}))},Vt=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8\n                L0.535,18.373"}))},Wt=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M7.5,19.499h9 M7.5,16.499h9 M5.5,16.5h-3c-1.103-0.003-1.997-0.897-2-2v-6c0.003-1.103,0.897-1.997,2-2h19\n                c1.103,0.003,1.997,0.897,2,2v6c-0.003,1.103-0.897,1.997-2,2h-3\n                M5.5,4.5v-4h9.586c0.265,0,0.52,0.105,0.707,0.293l2.414,2.414\n                C18.395,3.394,18.5,3.649,18.5,3.914V4.5\n                M18.5,22.5c0,0.552-0.448,1-1,1h-11c-0.552,0-1-0.448-1-1v-9h13V22.5z\n                M3.5,8.499\n                c0.552,0,1,0.448,1,1s-0.448,1-1,1s-1-0.448-1-1S2.948,8.499,3.5,8.499z\n                M14.5,0.499v4h4"}))},qt=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M3.434,10.537c0.141-0.438,0.316-0.864,0.523-1.274\n                M3.069,14.425C3.023,14.053,3,13.679,3,13.305 c0-0.291,0.014-0.579,0.041-0.863\n                M4.389,18.111c-0.341-0.539-0.623-1.112-0.843-1.711\n                M7.163,20.9 c-0.543-0.345-1.048-0.747-1.506-1.2\n                M10.98,22.248c-0.65-0.074-1.29-0.218-1.909-0.431\n                M10,4.25h2 c4.987,0.015,9.017,4.069,9.003,9.055c-0.013,4.581-3.456,8.426-8.008,8.945\n                M13.5,1.75L10,4.25l3.5,2.5"}))},Jt=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M20.566,10.537c-0.141-0.438-0.316-0.864-0.523-1.274\n                M20.931,14.425C20.977,14.053,21,13.679,21,13.305 c0-0.291-0.014-0.579-0.041-0.863\n                M19.611,18.111c0.341-0.539,0.624-1.114,0.843-1.713\n                M16.837,20.9 c0.543-0.345,1.048-0.747,1.506-1.2\n                M13.02,22.248c0.65-0.074,1.29-0.218,1.909-0.431\n                M14,4.25h-2 c-4.987,0.015-9.017,4.069-9.003,9.055c0.013,4.581,3.456,8.426,8.008,8.945\n                M10.5,1.75l3.5,2.5l-3.5,2.5"}))},jt=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M13.675,11.671l2.941-2.941c0.195-0.196,0.195-0.512-0.001-0.707C16.563,7.971,16.5,7.931,16.43,7.906\n                L4.168,3.527C3.908,3.434,3.622,3.57,3.529,3.83c-0.039,0.109-0.039,0.228,0,0.336l4.379,12.262\n                c0.093,0.26,0.379,0.396,0.639,0.303c0.07-0.025,0.133-0.065,0.185-0.117l2.943-2.943l6.146,6.146c0.195,0.195,0.512,0.195,0.707,0\n                l1.293-1.293c0.195-0.195,0.195-0.512,0-0.707L13.675,11.671z"}))},_t=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M21.783,21.034H2.332c-0.552,0-1-0.448-1-1c0-0.182,0.05-0.361,0.144-0.517L11.2,3.448\n                c0.286-0.472,0.901-0.624,1.373-0.338c0.138,0.084,0.254,0.2,0.338,0.338l9.726,16.069c0.286,0.473,0.134,1.087-0.339,1.373\n                C22.143,20.984,21.965,21.034,21.783,21.034z"}))},Ut=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M23.5,5.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V5.5z\n                M23.5,13.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V13.5z\n                M23.5,21.5 c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V21.5z"}))},Zt=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\n                M23.5,23.499\n                l-5.929-5.929\n                M5.5,10.499h10\n                M10.5,5.499v10"}))},Gt=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\n                M23.5,23.499\n                l-5.929-5.929\n                M5.5,10.499h10"}))},Yt=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M4.5,8.5H14\n                M4.5,11.5h6\n                M4.5,5.5h7\n                M4.5,14.5h4\n                M4.5,17.5h4\n                M10.5,23.5h-9c-0.552,0-1-0.448-1-1v-21\n                c0-0.552,0.448-1,1-1h13.293c0.265,0,0.52,0.105,0.707,0.293L19.207,4.5C19.395,4.687,19.5,4.942,19.5,5.207V8.5\n                M17.5,11.5\n                c3.314,0,6,2.686,6,6s-2.686,6-6,6s-6-2.686-6-6S14.186,11.5,17.5,11.5z\n                M17.5,20.5v-6\n                M17.5,14.5l-2.25,2.25\n                M17.5,14.5l2.25,2.25"}))},Xt={left:0,top:8},Kt=function(e){var t=e.onOpenFiles,r=n.useContext(ct),o=n.useContext(l);return n.createElement(V,{position:F.BottomCenter,target:n.createElement("div",{className:o.prefixClass+"-open-file"},n.createElement("input",{className:o.prefixClass+"-open-file-input",multiple:!1,type:"file",title:"",onChange:function(e){var n=e.target.files;n&&t(n)}}),n.createElement(Yt,null)),content:function(){return r.toolbar.openFile},offset:Xt})},Qt=function(e){var t=e.doc,r=e.render,o=n.useContext(l),a=n.useState(),i=a[0],c=a[1];return n.useEffect((function(){t.getMetadata().then((function(e){return Promise.resolve(e)})).then((function(e){return t.getDownloadInfo().then((function(t){return Promise.resolve({fileName:e.contentDispositionFilename||"",info:e.info,length:t.length})}))})).then((function(e){c(e)}))}),[]),i?r(i):n.createElement("div",{className:o.prefixClass+"-properties-loader"},n.createElement(v,null))},$t=function(e){var t=e.label,r=e.value,o=n.useContext(l);return n.createElement("dl",{className:o.prefixClass+"-property-item"},n.createElement("dt",{className:o.prefixClass+"-property-item-label"},t,":"),n.createElement("dd",{className:o.prefixClass+"-property-item-value"},r||"-"))},en=function(e){var t=e.doc,r=e.fileName,o=e.onToggle,a=n.useContext(ct),i=n.useContext(l),c=function(e){var t=de(e);return t?t.toLocaleDateString()+", "+t.toLocaleTimeString():""};return n.createElement("div",{className:i.prefixClass+"-properties-modal"},n.createElement(Qt,{doc:t,render:function(e){return n.createElement(n.Fragment,null,n.createElement("div",{className:i.prefixClass+"-properties-modal-group"},n.createElement($t,{label:""+a.property.fileName,value:e.fileName||Ce(r)}),n.createElement($t,{label:""+a.property.fileSize,value:(o=e.length,l=Math.floor(Math.log(o)/Math.log(1024)),(o/Math.pow(1024,l)).toFixed(2)+" "+["B","kB","MB","GB","TB"][l])})),n.createElement(h,null),n.createElement("div",{className:i.prefixClass+"-properties-modal-group"},n.createElement($t,{label:""+a.property.title,value:e.info.Title}),n.createElement($t,{label:""+a.property.author,value:e.info.Author}),n.createElement($t,{label:""+a.property.subject,value:e.info.Subject}),n.createElement($t,{label:""+a.property.keywords,value:e.info.Keywords}),n.createElement($t,{label:""+a.property.creator,value:e.info.Creator}),n.createElement($t,{label:""+a.property.creationDate,value:c(e.info.CreationDate)}),n.createElement($t,{label:""+a.property.modificationDate,value:c(e.info.ModDate)})),n.createElement(h,null),n.createElement("div",{className:i.prefixClass+"-properties-modal-group"},n.createElement($t,{label:""+a.property.pdfProducer,value:e.info.Producer}),n.createElement($t,{label:""+a.property.pdfVersion,value:e.info.PDFFormatVersion}),n.createElement($t,{label:""+a.property.pageCount,value:""+t.numPages})));var o,l}}),n.createElement("div",{className:i.prefixClass+"-properties-modal-footer"},n.createElement(d,{onClick:o},a.property.close)))},tn=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M10.5,0.5c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.5,10.5,0.5z\n                M23.5,23.5\n                l-5.929-5.929"}))},nn=new RegExp(" "),rn={left:0,top:8},on=function(e){var t=e.doc,r=e.onJumpToMatch,o=e.onSearchFor,a=n.useContext(l),i=t.numPages,c=Array(i).fill(0).map((function(e,t){return t})),u=n.useContext(ct),p=n.useState(""),f=p[0],m=p[1],g=n.useState([]),h=g[0],v=g[1],E=n.useState(0),C=E[0],x=E[1],w=n.useState(!1),b=w[0],k=w[1],y=n.useState(!1),S=y[0],P=y[1],M=n.useRef([]),L=function(e){m(e.target.value)},N=function(e,n,a){var i,l=function(e,t,n){return new RegExp(n?" "+e+" ":e,t?"g":"gi")}(e,n,a);o(l),x(0),v([]),(0===M.current.length?(i=c.map((function(e){return t.getPage(e+1).then((function(e){return e.getTextContent()})).then((function(t){var n=t.items.map((function(e){return e.str||""})).join("");return Promise.resolve({pageContent:n,pageIndex:e})}))})),Promise.all(i).then((function(e){return e.sort((function(e,t){return e.pageIndex-t.pageIndex})),Promise.resolve(e.map((function(e){return e.pageContent})))}))).then((function(e){return M.current=e,Promise.resolve(e)})):Promise.resolve(M.current)).then((function(e){var t=[];e.forEach((function(e,n){for(var r=(e.match(l)||[]).length,o=0;o<r;o++)t.push({matchIndex:o,pageIndex:n})})),v(t),t.length>0&&(x(1),r(t[0]))}))},T=function(e){13===e.keyCode&&f&&N(f,b,S)},R=function(){var e=C-1,t=e>0?e:h.length;x(t),r(h[t-1])},O=function(){var e=C+1,t=e<=h.length?e:1;x(t),r(h[t-1])},B=function(e){var t=e.target.checked;k(t),f&&N(f,t,S)},z=function(e){var t=e.target.checked;P(t),f&&N(f,b,t)},H=function(){return u.toolbar.search},A=function(){return u.search.previousMatch},I=function(){return u.search.nextMatch};return n.createElement(D,{position:F.BottomLeft,target:function(e,t){return n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:e,isSelected:t},n.createElement(tn,null)),content:H,offset:rn})},content:function(e){return n.createElement("div",{className:a.prefixClass+"-search-popover"},n.createElement("div",{className:a.prefixClass+"-search-popover-input-counter"},n.createElement("input",{className:a.prefixClass+"-search-popover-input",placeholder:""+u.search.enterToSearch,type:"text",value:f,onChange:L,onKeyDown:T}),n.createElement("div",{className:a.prefixClass+"-search-popover-counter"},C,"/",h.length)),n.createElement("label",{className:a.prefixClass+"-search-popover-label"},n.createElement("input",{className:a.prefixClass+"-search-popover-label-checkbox",checked:b,type:"checkbox",onChange:B})," ",u.search.matchCase),n.createElement("label",{className:a.prefixClass+"-search-popover-label"},n.createElement("input",{className:a.prefixClass+"-search-popover-label-checkbox",checked:S,type:"checkbox",onChange:z})," ",u.search.wholeWords),n.createElement("div",{className:a.prefixClass+"-search-popover-footer"},n.createElement("div",{className:a.prefixClass+"-search-popover-footer-item"},n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:R},n.createElement(Vt,null)),content:A,offset:rn})),n.createElement("div",{className:a.prefixClass+"-search-popover-footer-item"},n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:O},n.createElement(It,null)),content:I,offset:rn})),n.createElement("div",{className:a.prefixClass+"-search-popover-footer-button"},n.createElement(d,{onClick:function(){e(),o(nn),m(""),x(0),v([]),k(!1),P(!1)}},u.search.close))))},offset:rn,closeOnClickOutside:!1,closeOnEscape:!0})},an=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],ln=function(e){var t=an.findIndex((function(t){return t>=e}));return-1===t||0===t?e:an[t-1]},cn=function(e){var t=e.children,r=n.useContext(l);return n.createElement("ul",{className:r.prefixClass+"-menu"},t)},sn=[.5,.75,1,1.25,1.5,2,3,4],un={left:0,top:8},pn=function(e){var t=e.scale,r=e.onZoom,o=n.useContext(ct),a=n.useContext(l);return n.createElement(D,{position:F.BottomCenter,target:function(e){return n.createElement("span",{className:a.prefixClass+"-zoom-popover-target",onClick:function(){e()}},n.createElement("span",{className:a.prefixClass+"-zoom-popover-target-scale"},Math.round(100*t),"%"),n.createElement("span",{className:a.prefixClass+"-zoom-popover-target-arrow"}))},content:function(e){return n.createElement(cn,null,Object.keys(U).map((function(t){var a=t;return n.createElement(m,{key:a,onClick:function(){e(),r(a)}},function(e){switch(e){case U.ActualSize:return o.zoom.actualSize;case U.PageFit:return o.zoom.pageFit;case U.PageWidth:return o.zoom.pageWidth}}(a))})),n.createElement(u,null),sn.map((function(t){return n.createElement(m,{key:t,onClick:function(){e(),r(t)}},Math.round(100*t)+"%")})))},offset:un,closeOnClickOutside:!0,closeOnEscape:!0})},fn=function(){return n.createElement(p,{size:16},n.createElement("path",{d:"M12,0.5c1.381,0,2.5,1.119,2.5,2.5S13.381,5.5,12,5.5S9.5,4.381,9.5,3S10.619,0.5,12,0.5z\n                M12,9.5\n                c1.381,0,2.5,1.119,2.5,2.5s-1.119,2.5-2.5,2.5S9.5,13.381,9.5,12S10.619,9.5,12,9.5z\n                M12,18.5c1.381,0,2.5,1.119,2.5,2.5\n                s-1.119,2.5-2.5,2.5S9.5,22.381,9.5,21S10.619,18.5,12,18.5z"}))},mn={left:0,top:8},dn=function(e){var t=e.doc,r=e.fileName,o=e.scrollMode,a=e.selectionMode,i=e.onChangeScrollMode,l=e.onChangeSelectionMode,c=e.onJumpToFirstPage,p=e.onJumpToLastPage,f=e.onRotate,d=n.useContext(ct),g=function(){return d.toolbar.moreActions},h=function(e){return n.createElement(m,{icon:n.createElement(At,null),onClick:e},d.toolbar.documentProperties)},v=function(e){return n.createElement(en,{doc:t,fileName:r,onToggle:e})};return n.createElement(D,{position:F.BottomRight,target:function(e,t){return n.createElement(V,{position:F.BottomRight,target:n.createElement(s,{onClick:e,isSelected:t},n.createElement(fn,null)),content:g,offset:mn})},content:function(e){var t=function(t){e(),i(t)};return n.createElement(cn,null,n.createElement(m,{icon:n.createElement(_t,null),onClick:function(){e(),c()}},d.toolbar.goToFirstPage),n.createElement(m,{icon:n.createElement(Ot,null),onClick:function(){e(),p()}},d.toolbar.goToLastPage),n.createElement(u,null),n.createElement(m,{icon:n.createElement(Jt,null),onClick:function(){e(),f(90)}},d.toolbar.rotateForward),n.createElement(m,{icon:n.createElement(qt,null),onClick:function(){e(),f(-90)}},d.toolbar.rotateBackward),n.createElement(u,null),n.createElement(m,{checked:a===j.Text,icon:n.createElement(jt,null),onClick:function(){e(),l(j.Text)}},d.toolbar.textSelectionTool),n.createElement(m,{checked:a===j.Hand,icon:n.createElement(zt,null),onClick:function(){e(),l(j.Hand)}},d.toolbar.handTool),n.createElement(u,null),n.createElement(m,{checked:o===q.Vertical,icon:n.createElement(Ut,null),onClick:function(){return t(q.Vertical)}},d.toolbar.verticalScrolling),n.createElement(m,{checked:o===q.Horizontal,icon:n.createElement(Ht,null),onClick:function(){return t(q.Horizontal)}},d.toolbar.horizontalScrolling),n.createElement(m,{checked:o===q.Wrapped,icon:n.createElement(Pt,null),onClick:function(){return t(q.Wrapped)}},d.toolbar.wrappedScrolling),n.createElement(u,null),n.createElement(R,{target:h,content:v,closeOnClickOutside:!0,closeOnEscape:!0}))},offset:mn,closeOnClickOutside:!0,closeOnEscape:!0})},gn={left:0,top:8},hn=function(e){var t=e.currentPage,r=e.doc,o=e.fileName,a=e.scale,i=e.scrollMode,c=e.selectionMode,u=e.onChangeScrollMode,p=e.onChangeSelectionMode,f=e.onDownload,m=e.onFullScreen,d=e.onJumpTo,g=e.onJumpToMatch,h=e.onOpenFiles,v=e.onPrint,E=e.onRotate,C=e.onSearchFor,x=e.onToggleSidebar,w=e.onZoom,b=e.renderToolbar,k=n.useContext(ct),y=n.useContext(l),S=n.useState(!1),P=S[0],M=S[1],L=n.useState(t),N=L[0],T=L[1],O=n.useState(!1),B=O[0],z=O[1],H=r.numPages,A=function(){var e=t+1;e<H&&(T(e),d(e))},D=function(){var e=t-1;e>=0&&(T(e),d(e))},I=function(){return d(0)},W=function(){return d(H-1)},J=function(){return k.toolbar.documentProperties};return b({currentPage:t,currentPageInput:n.createElement("input",{className:y.prefixClass+"-toolbar-current-page-input",type:"text",value:P?N+1:t+1,onChange:function(e){var t=parseInt(e.target.value,10);t>0&&t<=H&&T(t-1)},onFocus:function(){M(!0),T(t)},onBlur:function(){M(!1)},onKeyDown:function(e){switch(e.keyCode){case 38:D();break;case 40:A();break;case 13:d(N)}}}),documentPropertiesButton:n.createElement(R,{target:function(e){return n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:e},n.createElement(At,null)),content:J,offset:gn})},content:function(e){return n.createElement(en,{doc:r,fileName:o,onToggle:e})},closeOnClickOutside:!0,closeOnEscape:!0}),downloadButton:n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:f},n.createElement(Ft,null)),content:function(){return k.toolbar.download},offset:gn}),fullScreenButton:n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:m},n.createElement(Bt,null)),content:function(){return k.toolbar.fullScreen},offset:gn}),goToFirstPageButton:n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:I},n.createElement(_t,null)),content:function(){return k.toolbar.goToFirstPage},offset:gn}),goToLastPageButton:n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:W},n.createElement(Ot,null)),content:function(){return k.toolbar.goToLastPage},offset:gn}),handToolButton:n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:function(){return p(j.Hand)},isSelected:c===j.Hand},n.createElement(zt,null)),content:function(){return k.toolbar.handTool},offset:gn}),horizontalScrollingButton:n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:function(){return u(q.Horizontal)},isSelected:i===q.Horizontal},n.createElement(Ht,null)),content:function(){return k.toolbar.horizontalScrolling},offset:gn}),moreActionsPopover:n.createElement(dn,{doc:r,fileName:o,scrollMode:i,selectionMode:c,onChangeScrollMode:u,onChangeSelectionMode:p,onJumpToFirstPage:I,onJumpToLastPage:W,onRotate:E}),nextPageButton:n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:A},n.createElement(It,null)),content:function(){return k.toolbar.nextPage},offset:gn}),numPages:H,openFileButton:n.createElement(Kt,{onOpenFiles:h}),previousPageButton:n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:D},n.createElement(Vt,null)),content:function(){return k.toolbar.previousPage},offset:gn}),printButton:n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:v},n.createElement(Wt,null)),content:function(){return k.toolbar.print},offset:gn}),rotateClockwiseButton:n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:function(){return E(90)}},n.createElement(Jt,null)),content:function(){return k.toolbar.rotateForward},offset:gn}),rotateCounterclockwiseButton:n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:function(){return E(-90)}},n.createElement(qt,null)),content:function(){return k.toolbar.rotateBackward},offset:gn}),searchPopover:n.createElement(on,{doc:r,onJumpToMatch:g,onSearchFor:C}),textSelectionButton:n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:function(){return p(j.Text)},isSelected:c===j.Text},n.createElement(jt,null)),content:function(){return k.toolbar.textSelectionTool},offset:gn}),toggleSidebarButton:n.createElement(V,{position:F.BottomLeft,target:n.createElement(s,{onClick:function(){z(!B),x()},isSelected:B},n.createElement(Dt,null)),content:function(){return k.toolbar.toggleSidebar},offset:gn}),verticalScrollingButton:n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:function(){return u(q.Vertical)},isSelected:i===q.Vertical},n.createElement(Ut,null)),content:function(){return k.toolbar.verticalScrolling},offset:gn}),zoomInButton:n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:function(){var e,t=(e=a,an.find((function(t){return t>e}))||e);w(t)}},n.createElement(Zt,null)),content:function(){return k.toolbar.zoomIn},offset:gn}),zoomOutButton:n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:function(){var e=ln(a);w(e)}},n.createElement(Gt,null)),content:function(){return k.toolbar.zoomOut},offset:gn}),zoomPopover:n.createElement(pn,{scale:a,onZoom:w}),wrappedScrollingButton:n.createElement(V,{position:F.BottomCenter,target:n.createElement(s,{onClick:function(){return u(q.Wrapped)},isSelected:i===q.Wrapped},n.createElement(Pt,null)),content:function(){return k.toolbar.wrappedScrolling},offset:gn})})},vn=new RegExp(" "),En=function(e){var t=e.defaultScale,r=e.doc,o=e.file,a=e.initialPage,i=e.keyword,c=e.layout,s=e.pageSize,u=e.render,p=e.renderPage,f=e.selectionMode,m=e.onDocumentLoad,d=e.onOpenFile,g=e.onZoom,h=e.annotationValue,v=e.onNewAnnotation,E=(e.onPageNumberChange,e.SelectionPopover),C=e.AnnotationPopover,x=n.useContext(l),w=n.useRef(null),b=n.useState(s.scale),k=b[0],y=b[1],S=n.useState(0),P=S[0],M=S[1],L=n.useState(0),T=L[0],R=L[1],O=n.useState(i?"string"==typeof i?new RegExp(i):i:vn),F=O[0],B=O[1],z=n.useState({matchIndex:-1,pageIndex:-1}),H=z[0],A=z[1],D=n.useState(q.Vertical),I=D[0],V=D[1],W=n.useState(f),J=W[0],_=W[1],Z=function(e){var t=n.useContext(l),r=n.useState(!1),o=r[0],a=r[1],i=n.useRef({top:0,left:0,x:0,y:0}),c=function(t){var n=e.current;n&&(n.scrollTop=i.current.top-(t.clientY-i.current.y),n.scrollLeft=i.current.left-(t.clientX-i.current.x))},s=function(){var n=e.current;n&&(n.classList.add(t.prefixClass+"-grab"),n.classList.remove(t.prefixClass+"-grabbing"),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",s))},u=function(n){var r=e.current;o&&r&&(r.classList.remove(t.prefixClass+"-grab"),r.classList.add(t.prefixClass+"-grabbing"),n.preventDefault(),n.stopPropagation(),i.current={left:r.scrollLeft,top:r.scrollTop,x:n.clientX,y:n.clientY},document.addEventListener("mousemove",c),document.addEventListener("mouseup",s))};return n.useEffect((function(){var n=e.current;if(n)return o?n.classList.add(t.prefixClass+"-grab"):n.classList.remove(t.prefixClass+"-grab"),n.addEventListener("mousedown",u),function(){n.removeEventListener("mousedown",u)}}),[o]),{toggleDragScroll:a}}(w).toggleDragScroll,G=te(w),Y=G.isFullScreen,X=G.openFullScreen,K=G.closeFullScreen,Q=N(),$=r.numPages,ee=s.pageWidth,ne=s.pageHeight,re=Array($).fill(null),oe=re.map((function(){return 0})),ae=re.map((function(){return n.useRef()})),le=n.useCallback((function(e,t,n){v&&v(e,t,P,n)}),[v,P]),ce=function(e){if(0!==e.length){var t,n,r=e[0];if("pdf"===(t=o.name,n=t.split(/\./).pop(),n?n.toLowerCase():"").toLowerCase())new Promise((function(e){var t=new FileReader;t.readAsArrayBuffer(r),t.onload=function(){var n=new Uint8Array(t.result);e(n)}})).then((function(e){d(r.name,e)}))}},se=function(e,t){var r=n.useRef(0),o=n.useState(!1),a=o[0],i=o[1],l=function(e){e.preventDefault(),i(!1),r.current=0,e.dataTransfer&&t(e.dataTransfer.files)},c=function(e){e.preventDefault()},s=function(e){e.preventDefault(),r.current+=1,r.current<=1&&i(!0)},u=function(e){e.preventDefault(),r.current-=1,r.current<=0&&i(!1)};return n.useEffect((function(){var t=e.current;if(t)return t.addEventListener("drop",l),t.addEventListener("dragover",c),t.addEventListener("dragenter",s),t.addEventListener("dragleave",u),function(){t.removeEventListener("drop",l),t.removeEventListener("dragover",c),t.removeEventListener("dragenter",s),t.removeEventListener("dragleave",u)}}),[e.current]),{isDragging:a}}(w,(function(e){return ce(e)})).isDragging,ue=n.useState(ft.Inactive),pe=ue[0],fe=ue[1],me=function(e){if(!(e<0||e>=$)){M(e);var t=w.current,n=ae[e].current;t&&n&&(t.scrollTop=n.offsetTop)}};n.useEffect((function(){m(r),a&&me(a)}),[]);var de=function(e){Z(e===j.Hand),_(e)},ge=function(){xe(o.name,o.data)},he=function(e){var t=w.current;if(t){var n=1;switch(e){case U.ActualSize:n=1;break;case U.PageFit:n=Math.min((t.offsetWidth-17)/ee,(t.offsetHeight-16)/ne);break;case U.PageWidth:n=(t.offsetWidth-17)/ee;break;default:n=e}y(n),g(r,n)}};n.useEffect((function(){f===j.Hand&&Z(!0),t&&he(t)}),[]);var ve=function(e,t){oe[e]=t;var n=oe.reduce((function(e,t,n,r){return t>r[e]?n:e}),0);M(n)},Ee=function(e){R(360===T||-360===T?e:T+e)},Ce=function(e){var t=w.current;if(t){switch(e){case q.Vertical:t.classList.add(x.prefixClass+"-inner-pages-vertical"),t.classList.remove(x.prefixClass+"-inner-pages-horizontal"),t.classList.remove(x.prefixClass+"-inner-pages-wrapped");break;case q.Horizontal:t.classList.add(x.prefixClass+"-inner-pages-horizontal"),t.classList.remove(x.prefixClass+"-inner-pages-vertical"),t.classList.remove(x.prefixClass+"-inner-pages-wrapped");break;case q.Wrapped:t.classList.add(x.prefixClass+"-inner-pages-wrapped"),t.classList.remove(x.prefixClass+"-inner-pages-vertical"),t.classList.remove(x.prefixClass+"-inner-pages-horizontal")}V(e)}},we=function(e){me(e.pageIndex),A(e)},be=function(e,t,n){var o=w.current;if(o){var a=e+1;r.getPage(a).then((function(r){var a=r.getViewport({scale:1}),i=0,l=t||0;switch(n){case U.PageFit:i=0,he(U.PageFit);break;default:i=(a.height-l)*k}var c=ae[e].current;c&&(o.scrollTop=c.offsetTop+i)}))}},ke=function(e){var t=P-1,n=P+1;switch(e){case"FirstPage":me(0);break;case"LastPage":me($-1);break;case"NextPage":n<$&&me(n);break;case"PrevPage":t>=0&&me(t)}},ye=function(){return fe(ft.Preparing)};return u({viewer:c(Q.opened,{attrs:{style:{position:"relative"}},children:n.createElement(ht,{doc:r,pageHeight:ne,pageWidth:ee,printStatus:pe,rotation:T,onCancel:function(){return fe(ft.Inactive)},onStartPrinting:function(){return fe(ft.Ready)}})},{attrs:{ref:w},children:n.createElement(n.Fragment,null,se&&n.createElement(st,null),Y&&n.createElement(Et,{onClick:K}),Array($).fill(0).map((function(e,t){return n.createElement("div",{className:x.prefixClass+"-inner-page",key:"pagelayer-"+t,ref:function(e){ae[t].current=e}},n.createElement(ie,{value:h?h[t]:[],onNewAnnotation:function(e,t,n){return le(e,t,n)},AnnotationPopover:C,SelectionPopover:E},n.createElement(lt,{doc:r,keywordRegexp:F,height:ne,match:H,pageIndex:t,renderPage:p,rotation:T,scale:k,width:ee,onExecuteNamedAction:ke,onJumpToDest:be,onPageVisibilityChanged:ve})))})))},(function(e){return n.createElement(hn,{currentPage:P,doc:r,fileName:o.name,scale:k,scrollMode:I,selectionMode:J,onChangeScrollMode:Ce,onChangeSelectionMode:de,onDownload:ge,onFullScreen:X,onJumpTo:me,onJumpToMatch:we,onOpenFiles:ce,onPrint:ye,onRotate:Ee,onSearchFor:B,onToggleSidebar:Q.toggle,onZoom:he,renderToolbar:e})}),{attrs:{},children:n.createElement(Rt,{currentPage:P,doc:r,height:ne,rotation:T,width:ee,onJumpToDest:be,onJumpToPage:me})}),doc:r,download:ge,changeScrollMode:Ce,changeSelectionMode:de,jumpToPage:me,print:ye,rotate:Ee,zoom:he})},Cn=function(e){var t=e.doc,r=e.render,o=n.useContext(l),a=n.useRef(null),i=n.useState({pageHeight:0,pageWidth:0,scale:1}),c=i[0],s=i[1];return n.useEffect((function(){t.getPage(1).then((function(e){var t=e.getViewport({scale:1}),n=t.width,r=t.height,o=a.current;if(o){var i=o.offsetWidth/n,l=ln(Math.max(1,i));s({pageHeight:r,pageWidth:n,scale:l})}}))}),[t]),0===c.pageWidth?n.createElement("div",{className:o.prefixClass+"-page-size-calculator",ref:a},n.createElement(v,null)):r(c)},xn=function(){},wn=function(e){function t(t){var n=e.call(this)||this;return n.verifyPasswordFn=t,n}return C(t,e),t}(xn),bn=function(e){var t=e.verifyPasswordFn,r=n.useContext(ct),o=n.useContext(l),a=n.useState(""),i=a[0],c=a[1];return n.createElement("div",{className:o.prefixClass+"-asking-password"},n.createElement("div",null,n.createElement("div",{className:o.prefixClass+"-asking-password-message"},r.askingPassword.requirePasswordToOpen,":"),n.createElement("div",{className:o.prefixClass+"-asking-password-input-container"},n.createElement("input",{className:o.prefixClass+"-asking-password-input",type:"password",onChange:function(e){return c(e.target.value)}}),n.createElement("button",{className:o.prefixClass+"-asking-password-button",onClick:function(){return t(i)}},r.askingPassword.submit))))},kn=function(e){function t(t){var n=e.call(this)||this;return n.doc=t,n}return C(t,e),t}(xn),yn=function(e){function t(t){var n=e.call(this)||this;return n.error=t,n}return C(t,e),t}(xn),Sn=function(e){function t(t){var n=e.call(this)||this;return n.percentages=t,n}return C(t,e),t}(xn),Pn=function(e){var t=e.verifyPasswordFn,r=n.useContext(ct),o=n.useContext(l),a=n.useState(""),i=a[0],c=a[1];return n.createElement("div",{className:o.prefixClass+"-asking-password"},n.createElement("div",null,n.createElement("div",{className:o.prefixClass+"-asking-password-message"},r.wrongPassword.tryAgain,":"),n.createElement("div",{className:o.prefixClass+"-asking-password-input-container"},n.createElement("input",{className:o.prefixClass+"-asking-password-input",type:"password",onChange:function(e){return c(e.target.value)}}),n.createElement("button",{className:o.prefixClass+"-asking-password-button",onClick:function(){return t(i)}},r.wrongPassword.submit))))},Mn=function(e){function t(t){var n=e.call(this)||this;return n.verifyPasswordFn=t,n}return C(t,e),t}(xn),Ln=function(e){var t=e.file,o=e.render,a=e.renderError,i=n.useContext(l),c=n.useState(new Sn(0)),s=c[0],u=c[1];switch(n.useEffect((function(){u(new Sn(0));var e=r.getDocument(t);return e.onPassword=function(e,t){switch(t){case r.PasswordResponses.NEED_PASSWORD:u(new wn(e));break;case r.PasswordResponses.INCORRECT_PASSWORD:u(new Mn(e))}},e.promise.then((function(e){return u(new kn(e))}),(function(e){return u(new yn({message:e.message||"Cannot load document",name:e.name}))})),function(){e.destroy()}}),[t]),!0){case s instanceof wn:return n.createElement(bn,{verifyPasswordFn:s.verifyPasswordFn});case s instanceof Mn:return n.createElement(Pn,{verifyPasswordFn:s.verifyPasswordFn});case s instanceof kn:return o(s.doc);case s instanceof yn:return a?a(s.error):n.createElement("div",{className:i.prefixClass+"-doc-error"},n.createElement("div",{className:i.prefixClass+"-doc-error-text"},s.error.message));case s instanceof Sn:default:return n.createElement("div",{className:i.prefixClass+"-doc-loading"},n.createElement(v,null))}},Nn={askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},attachment:{clickToDownload:"Click to download",noAttachment:"There is no attachment"},bookmark:{noBookmark:"There is no bookmark"},main:{dragDropFile:"Drag and drop a PDF document here"},printProgress:{cancel:"Cancel",preparingDocument:"Preparing document ..."},property:{author:"Author",close:"Close",creationDate:"Creation date",creator:"Creator",fileName:"File name",fileSize:"File size",keywords:"Keywords",modificationDate:"Modification date",pageCount:"Page count",pdfProducer:"PDF producer",pdfVersion:"PDF Version",subject:"Subject",title:"Title"},search:{close:"Close",enterToSearch:"Enter to search",matchCase:"Match case",nextMatch:"Next match",previousMatch:"Previous match",wholeWords:"Whole words"},sidebar:{attachment:"Attachment",bookmark:"Bookmark",thumbnail:"Thumbnail"},toolbar:{documentProperties:"Document properties",download:"Download",fullScreen:"Full screen",goToFirstPage:"Go to first page",goToLastPage:"Go to last page",handTool:"Hand tool",horizontalScrolling:"Horizontal scrolling",moreActions:"More actions",nextPage:"Next page",openFile:"Open file",previousPage:"Previous page",print:"Print",rotateBackward:"Rotate counterclockwise",rotateForward:"Rotate clockwise",search:"Search",textSelectionTool:"Text selection tool",toggleSidebar:"Toggle sidebar",verticalScrolling:"Vertical scrolling",zoomIn:"Zoom in",zoomOut:"Zoom out",wrappedScrolling:"Wrapped scrolling"},wrongPassword:{submit:"Submit",tryAgain:"The password is wrong. Please try again"},zoom:{actualSize:"Actual size",pageFit:"Page fit",pageWidth:"Page width"}},Tn=function(e){var t=e.children,r=e.localization||Nn;return n.createElement(ct.Provider,{value:r},t)},Rn=function(e){var t=e.children,r=e.prefixClass;return n.createElement(l.Provider,{value:{prefixClass:r||"viewer"}},t)};exports.Button=s,exports.Icon=p,exports.MenuDivider=u,exports.MenuItem=m,exports.Modal=R,exports.Popover=D,exports.Position=F,exports.PrimaryButton=d,exports.ProgressBar=g,exports.ScrollMode=q,exports.SelectionMode=j,exports.Separator=h,exports.SpecialZoomLevel=U,exports.Spinner=v,exports.Tooltip=V,exports.Worker=function(e){var t=e.children,o=e.workerUrl;return r.GlobalWorkerOptions.workerSrc=o,n.createElement(n.Fragment,null,t)},exports.default=function(e){var r=e.defaultScale,o=e.fileUrl,a=e.initialPage,i=e.keyword,l=e.layout,c=e.localization,s=e.prefixClass,u=e.render,p=e.renderError,f=e.renderPage,m=e.selectionMode,d=void 0===m?j.Text:m,g=e.onDocumentLoad,h=void 0===g?function(){}:g,v=e.onZoom,E=void 0===v?function(){}:v,C=e.annotationValue,x=e.onPageNumberChange,w=e.onNewAnnotation,y=void 0===w?function(){}:w,S=e.SelectionPopover,P=e.AnnotationPopover,M=n.useState({data:o,name:"string"==typeof o?o:""}),L=M[0],N=M[1],T=function(e,t,n,r,o){return b(e,t,n,r(k),o)},R=function(e,t){N({data:t,name:e})};t.useEffect((function(){N({data:o,name:"string"==typeof o?o:""})}),[o]);var O,F=u||function(e){return e.viewer};return n.createElement(Rn,{prefixClass:s},n.createElement(Tn,{localization:c},n.createElement(Ln,{file:L.data,render:(O=F,function(e){return n.createElement(Cn,{doc:e,render:function(t){var o=t;return n.createElement(En,{defaultScale:r,doc:e,file:L,initialPage:a,keyword:i,layout:l||T,pageSize:o,render:O,renderPage:f,selectionMode:d,onDocumentLoad:h,onOpenFile:R,onZoom:E,onPageNumberChange:x,annotationValue:C,onNewAnnotation:y,SelectionPopover:S,AnnotationPopover:P})}})}),renderError:p})))},exports.defaultLayout=b,exports.defaultToolbar=k;
